{
  "author": "",
  "category": "Third-party",
  "extensionNamespace": "",
  "fullName": "OneSignal",
  "helpPath": "https://documentation.onesignal.com/docs/generate-a-google-server-api-key",
  "iconUrl": "data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAyMy4wLjMsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0iSWNvbnMiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4Ig0KCSB2aWV3Qm94PSIwIDAgMzIgMzIiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDMyIDMyOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+DQo8c3R5bGUgdHlwZT0idGV4dC9jc3MiPg0KCS5zdDB7ZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoyO3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2UtbWl0ZXJsaW1pdDoxMDt9DQoJLnN0MXtmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjI7c3Ryb2tlLWxpbmVjYXA6cm91bmQ7c3Ryb2tlLWxpbmVqb2luOnJvdW5kO3N0cm9rZS1taXRlcmxpbWl0OjEwO30NCgkuc3Qye2ZpbGw6bm9uZTtzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MjtzdHJva2UtbWl0ZXJsaW1pdDoxMDt9DQo8L3N0eWxlPg0KPHBhdGggY2xhc3M9InN0MSIgZD0iTTE5LDI1aDEwbC0wLjktMS4zQzI3LjQsMjIuNiwyNywyMS4zLDI3LDIwdjBjMC0xLjctMS4zLTMtMy0zaDBjLTEuNywwLTMsMS4zLTMsM3YwYzAsMS4zLTAuNCwyLjYtMS4xLDMuNw0KCUwxOSwyNXoiLz4NCjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0yNiwyN2MwLDEuMS0wLjksMi0yLDJzLTItMC45LTItMiIvPg0KPHBhdGggY2xhc3M9InN0MCIgZD0iTTI4LDE0VjVINHYxN2MwLDAsMCw1LDAsNmwwLDBjMi43LTIuMyw1LjgtNCw5LjItNSIvPg0KPGxpbmUgY2xhc3M9InN0MSIgeDE9IjExIiB5MT0iMTIiIHgyPSIxNyIgeTI9IjEyIi8+DQo8bGluZSBjbGFzcz0ic3QxIiB4MT0iMTEiIHkxPSIxNiIgeDI9IjE0IiB5Mj0iMTYiLz4NCjwvc3ZnPg0K",
  "name": "OneSignal",
  "previewIconUrl": "https://asset-resources.gdevelop.io/public-resources/Icons/Line Hero Pack/Master/SVG/Communication/83c3b1f43896ce61930a58332b1fa00a1dcd9d1cabb5eec469ea54b30f173cba_Communication_chat_message_sms_bell_ring_notification.svg",
  "shortDescription": "OneSignal is the fastest and most reliable service to send push notifications, in-app messages, SMS, and emails.",
  "version": "1.0.0",
  "description": "Check out the documentation here - https://documentation.onesignal.com/docs/onesignal-platform",
  "tags": [
    "network"
  ],
  "authorIds": [
    "jy7FXnGX0ZZcWfrAI9YuQaeIphi1"
  ],
  "dependencies": [
    {
      "exportName": "onesignal-cordova-plugin",
      "name": "onesignal-cordova-plugin",
      "type": "cordova",
      "version": "3.3.1"
    }
  ],
  "eventsFunctions": [
    {
      "description": "Initialize OneSignal.",
      "fullName": "Initialize OneSignal",
      "functionType": "Action",
      "name": "Initialize",
      "sentence": "Initialize OneSignal",
      "events": [
        {
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": [
            "const appid = eventsFunctionContext.getArgument(\"appid\");",
            "const prompt = eventsFunctionContext.getArgument(\"prompt\");",
            "const permission = eventsFunctionContext.getArgument(\"permission\");",
            "",
            "document.addEventListener('deviceready', OneSignalInit, false);",
            "function OneSignalInit() {",
            "    // NOTE: Update the init value below with your OneSignal AppId.",
            "    window.plugins.OneSignal.init(appid);",
            "    window.plugins.OneSignal.Notifications.setNotificationOpenedHandler(function(opened) {",
            "        let notificationData = JSON.stringify(opened);",
            "        console.log('notificationOpenedCallback: ' + notificationData);",
            "    });",
            "",
            "    if (prompt == true) {",
            "        window.plugins.OneSignal.Notifications.requestPermission(function(accepted) {",
            "        console.log(\"User accepted notifications: \" + accepted);",
            "        permission = accepted",
            "    });",
            "    }",
            "    ",
            "}"
          ],
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "parameters": [
        {
          "description": "Your onesignal app id",
          "name": "appid",
          "type": "string"
        },
        {
          "defaultValue": "yes",
          "description": "Prompts the user for notification permissions",
          "name": "prompt",
          "optional": true,
          "type": "yesorno"
        },
        {
          "description": "Variable to store notification permission status",
          "name": "permission",
          "type": "scenevar"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "Capture Email.",
      "fullName": "Capture Email",
      "functionType": "Action",
      "name": "UserEmail",
      "sentence": "Capture Email _PARAM1_",
      "events": [
        {
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": [
            "const email = eventsFunctionContext.getArgument(\"email\");",
            "",
            "document.addEventListener('deviceready', OneSignalUserEmail, false);",
            "function OneSignalUserEmail() {",
            "",
            "    window.plugins.OneSignal.User.addEmail(email);",
            "",
            "}"
          ],
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "parameters": [
        {
          "description": "Email",
          "name": "email",
          "type": "string"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "Capture SMS.",
      "fullName": "Capture SMS",
      "functionType": "Action",
      "name": "UserSMS",
      "sentence": "Capture SMS _PARAM1_",
      "events": [
        {
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": [
            "const sms = eventsFunctionContext.getArgument(\"sms\");",
            "",
            "document.addEventListener('deviceready', OneSignalUserSMS, false);",
            "function OneSignalUserSMS() {",
            "",
            "    window.plugins.OneSignal.User.addSms(sms);",
            "",
            "}"
          ],
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "parameters": [
        {
          "description": "SMS",
          "name": "sms",
          "type": "string"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "Use Data Tags for custom user and event properties. These allow for message personalization and segmentation.",
      "fullName": "Data Tags",
      "functionType": "Action",
      "name": "DataTags",
      "sentence": "Send Data Tags _PARAM1_",
      "events": [
        {
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": [
            "const dataTags = eventsFunctionContext.getArgument(\"datatags\");\r",
            "\r",
            "document.addEventListener('deviceready', OneSignalUserDataTags, false);\r",
            "function OneSignalUserDataTags() {\r",
            "\r",
            "    window.plugins.OneSignal.User.addTags(dataTags);\r",
            "\r",
            "}"
          ],
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "parameters": [
        {
          "description": "Data Tags ",
          "name": "datatags",
          "type": "scenevar"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "You will supply the external user id to the OneSignal SDK.",
      "fullName": "Data Tags",
      "functionType": "Action",
      "name": "Login",
      "sentence": "Send Data Tags _PARAM1_",
      "events": [
        {
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": [
            "const externalId = eventsFunctionContext.getArgument(\"login\");\r",
            "\r",
            "document.addEventListener('deviceready', OneSignalUserLogin, false);\r",
            "function OneSignalUserLogin() {\r",
            "\r",
            "    window.plugins.OneSignal.login(\"externalId\");\r",
            "\r",
            "}"
          ],
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "parameters": [
        {
          "description": "External Id",
          "name": "login",
          "type": "expression"
        }
      ],
      "objectGroups": []
    }
  ],
  "eventsBasedBehaviors": [],
  "eventsBasedObjects": []
}