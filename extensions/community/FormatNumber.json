{"author":"","category":"User interface","extensionNamespace":"","fullName":"Format Number","helpPath":"","iconUrl":"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0ibWRpLWRlY2ltYWwtY29tbWEtZGVjcmVhc2UiIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJNNSAxM1YxNkg0TDMgMTNBMSAxIDAgMCAxIDUgMTNNMTUgMTZWMTRMMTIgMTdMMTUgMjBWMThIMjFWMTZNMTIgMTFBMyAzIDAgMCAxIDYgMTFWOEEzIDMgMCAwIDEgMTIgOE0xMCA4QTEgMSAwIDAgMCA4IDhWMTFBMSAxIDAgMCAwIDEwIDExWiIgLz48L3N2Zz4=","name":"FormatNumber","previewIconUrl":"https://asset-resources.gdevelop.io/public-resources/Icons/ec6556b0bd210c91a4fdb1cc0829a924768f532df7d4470366ec96f98a81392f_decimal-comma-decrease.svg","shortDescription":"Adds two methods of formatting numbers (by separator and unit measure), both useful for clicker games.","version":"0.0.0","description":["Adds two methods of formatting numbers (by separator and unit measure), both useful for clicker games.","","- Use the expression `FormatBySeparator` to format a number by the specified separator. (Example: 1000000 will result in 1,000,000)","- Use the expression `FormatByUnit` to format a number by unit measure. (Example: 1000 will result in 1K, and 1000000 will result in 1M)","","How to use the `FormatByUnit` expression:","","1. Create an array variable of any scope. (Object, scene or global.)","2. Add one child for each unit measure (k, M, B, T, ...) -> (You can customize it.)","3. At the expression, insert the variable in JSON string format:","","Object variable - `ObjectVarToJSON(Variable)`","Scene variable - `ToJSON(Variable)`","Global variable - `GlobalVarToJSON(Variable)`","","Important information:","","1. You can use the expression `FormatByUnitScene` if you want to just type out the scene array variable.","2. There is a hidden global array variable version aswell, but **use it at your own risk, since it can break in future GDevelop releases**. It is recommended to just convert the global variable to a JSON string instead, and use it at the `FormatByUnit` expression. (The `FormatByUnitScene` expression is **safe** to use.)"],"tags":["comma","separate","number","separator","clicker","idle","format","number","unit","measure","string","decimal","house"],"authorIds":["OaVzVu7cuKhv5Qj0i3vRZYFttl72"],"dependencies":[],"eventsFunctions":[{"description":"Return a string containing a number formatted by the specified separator.","fullName":"Format number by separator","functionType":"StringExpression","name":"FormatBySeparator","sentence":"","events":[{"type":"BuiltinCommonInstructions::Comment","color":{"b":109,"g":230,"r":255,"textB":0,"textG":0,"textR":0},"comment":"This sets the return value to the original number with no decimal houses if none of the requirements are met."},{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"SetReturnString"},"parameters":["LargeNumberToString(floor(Number))"]}]},{"type":"BuiltinCommonInstructions::Comment","color":{"b":109,"g":230,"r":255,"textB":0,"textG":0,"textR":0},"comment":"This sets the return value to the original number with the specified decimal separator and amount of decimal houses."},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"CompareArgumentAsNumber"},"parameters":["\"DecimalHouses\"",">","0"]},{"type":{"value":"BuiltinCommonInstructions::CompareNumbers"},"parameters":["StrFind(Number,\".\")","!=","-1"]}],"actions":[{"type":{"value":"ModVarSceneTxt"},"parameters":["__FormatNumberExtension._PastDecimal","=","SubStr(LargeNumberToString(Number),StrFind(LargeNumberToString(Number),\".\") + 1,StrLength(LargeNumberToString(Number)) - StrFind(LargeNumberToString(Number),\".\"))"]},{"type":{"value":"SetReturnString"},"parameters":["SubStr(LargeNumberToString(Number),0,StrFind(LargeNumberToString(Number),\".\"))+DecimalSeparator+SubStr(VariableString(__FormatNumberExtension._PastDecimal),0,clamp(DecimalHouses,0,3))"]}]},{"type":"BuiltinCommonInstructions::Comment","color":{"b":109,"g":230,"r":255,"textB":0,"textG":0,"textR":0},"comment":"This checks if the number is above or equal to 1000, because numbers below 1000 do not have separators. (Except for the one for decimal houses.)"},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"CompareArgumentAsNumber"},"parameters":["\"Number\"",">=","1000"]}],"actions":[],"events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"BuiltinCommonInstructions::Or"},"parameters":[],"subInstructions":[{"type":{"value":"CompareArgumentAsNumber"},"parameters":["\"DecimalHouses\"","=","0"]},{"type":{"value":"BuiltinCommonInstructions::And"},"parameters":[],"subInstructions":[{"type":{"value":"BuiltinCommonInstructions::CompareNumbers"},"parameters":["StrFind(Number,\".\")","=","-1"]}]}]}],"actions":[{"type":{"value":"ModVarSceneTxt"},"parameters":["__FormatNumberExtension._FormatNumber","=","FormatNumber::StrInsert(LargeNumberToString(floor(Number)),StrLength(LargeNumberToString(floor(Number))) - 3,Separator)"]}]},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"CompareArgumentAsNumber"},"parameters":["\"DecimalHouses\"",">","0"]},{"type":{"value":"BuiltinCommonInstructions::CompareNumbers"},"parameters":["StrFind(Number,\".\")","!=","-1"]}],"actions":[{"type":{"value":"ModVarSceneTxt"},"parameters":["__FormatNumberExtension._FormatNumber","=","FormatNumber::StrInsert(SubStr(LargeNumberToString(Number),0,StrFind(LargeNumberToString(Number),\".\"))+DecimalSeparator+SubStr(VariableString(__FormatNumberExtension._PastDecimal),0,clamp(DecimalHouses,0,3)),StrLength(LargeNumberToString(floor(Number))) - 3,Separator)"]}]},{"type":"BuiltinCommonInstructions::Comment","color":{"b":109,"g":230,"r":255,"textB":0,"textG":0,"textR":0},"comment":"After adding a separator 3 houses before the end of the number (Example: 1000000,000), it will start a loop of checking if the previous 3 houses are also avaliable, and fill them until the limit is reached (Example: 1,000,000,000 <- This can not have another separator.)"},{"infiniteLoopWarning":true,"type":"BuiltinCommonInstructions::While","whileConditions":[{"type":{"value":"BuiltinCommonInstructions::CompareNumbers"},"parameters":["StrFind(VariableString(__FormatNumberExtension._FormatNumber),Separator) - 3",">","0"]}],"conditions":[],"actions":[{"type":{"value":"ModVarSceneTxt"},"parameters":["__FormatNumberExtension._FormatNumber","=","FormatNumber::StrInsert(VariableString(__FormatNumberExtension._FormatNumber),StrFind(VariableString(__FormatNumberExtension._FormatNumber),Separator)-3,Separator)"]}]},{"type":"BuiltinCommonInstructions::Comment","color":{"b":109,"g":230,"r":255,"textB":0,"textG":0,"textR":0},"comment":"Return the new number as string."},{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"SetReturnString"},"parameters":["VariableString(__FormatNumberExtension._FormatNumber)"]}]}]}],"expressionType":{"type":"string"},"parameters":[{"description":"Number to format","name":"Number","type":"expression"},{"description":"Separator","name":"Separator","supplementaryInformation":"[\",\",\".\"]","type":"stringWithSelector"},{"description":"Number of decimal houses (default: 0, maximum: 3)","name":"DecimalHouses","type":"expression"},{"description":"Decimal houses separator (ommited if decimal houses is 0)","name":"DecimalSeparator","type":"string"}],"objectGroups":[]},{"description":"Return a string containing a number formatted by unit measure, based on the childs of an array variable.","fullName":"Format number by unit using an array","functionType":"StringExpression","name":"FormatByUnit","sentence":"","events":[{"type":"BuiltinCommonInstructions::Comment","color":{"b":109,"g":230,"r":255,"textB":0,"textG":0,"textR":0},"comment":"This sets the return value to the original number (with the specified amount of decimal houses) if none of the requirements are met."},{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"SetReturnString"},"parameters":["LargeNumberToString(floorTo(Number,DecimalHouses))"]}]},{"type":"BuiltinCommonInstructions::Comment","color":{"b":109,"g":230,"r":255,"textB":0,"textG":0,"textR":0},"comment":"This checks if the number is above or equal to 1000, because numbers below 1000 do not have separators. (Except for the one for decimal houses.)"},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"CompareArgumentAsNumber"},"parameters":["\"Number\"",">=","1000"]}],"actions":[{"type":{"value":"JSONToVariableStructure"},"parameters":["Array","__FormatNumberExtension._Array"]},{"type":{"value":"ModVarSceneTxt"},"parameters":["__FormatNumberExtension._FormatNumber","=","LargeNumberToString(floorTo(Number / pow(1000, floor((StrLength(LargeNumberToString(floor(Number))) - 1) / 3)),clamp(DecimalHouses,0,3))) + VariableString(__FormatNumberExtension._Array[floor((StrLength(LargeNumberToString(floor(Number))) - 1) / 3) - 1])"]}],"events":[{"type":"BuiltinCommonInstructions::Comment","color":{"b":109,"g":230,"r":255,"textB":0,"textG":0,"textR":0},"comment":"Replace the default dot with the specified decimal separator."},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"CompareArgumentAsNumber"},"parameters":["\"DecimalHouses\"",">","0"]}],"actions":[{"type":{"value":"ModVarSceneTxt"},"parameters":["__FormatNumberExtension._FormatNumber","=","SubStr(VariableString(__FormatNumberExtension._FormatNumber),0,StrFind(VariableString(__FormatNumberExtension._FormatNumber),\".\"))+DecimalSeparator+SubStr(VariableString(__FormatNumberExtension._FormatNumber),StrFind(VariableString(__FormatNumberExtension._FormatNumber),\".\")+1,StrLength(VariableString(__FormatNumberExtension._FormatNumber)) - StrFind(VariableString(__FormatNumberExtension._FormatNumber),\".\"))"]}]},{"type":"BuiltinCommonInstructions::Comment","color":{"b":109,"g":230,"r":255,"textB":0,"textG":0,"textR":0},"comment":"Remove unexpected decimal separator at the beginning. (When the \"Houses\" parameter is not 0 but the number is not suitable to decimal houses splitting.)"},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"BuiltinCommonInstructions::CompareStrings"},"parameters":["StrAt(VariableString(__FormatNumberExtension._FormatNumber),0)","=","DecimalSeparator"]}],"actions":[{"type":{"value":"ModVarSceneTxt"},"parameters":["__FormatNumberExtension._FormatNumber","=","SubStr(VariableString(__FormatNumberExtension._FormatNumber),1,StrLength(VariableString(__FormatNumberExtension._FormatNumber)) - 1)"]}]},{"type":"BuiltinCommonInstructions::Comment","color":{"b":109,"g":230,"r":255,"textB":0,"textG":0,"textR":0},"comment":"Return the new number as string."},{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"SetReturnString"},"parameters":["VariableString(__FormatNumberExtension._FormatNumber)"]}]}]}],"expressionType":{"type":"string"},"parameters":[{"description":"Number to format","name":"Number","type":"expression"},{"description":"Array variable in JSON format","longDescription":"Use ObjectVarToJSON(), ToJSON(), or GlobalVarToJSON() to convert an array variable to JSON format.","name":"Array","supplementaryInformation":"[\",\",\".\"]","type":"string"},{"description":"Number of decimal houses (default: 0, maximum: 3)","name":"DecimalHouses","type":"expression"},{"description":"Decimal houses separator (ommited if decimal houses is 0)","name":"DecimalSeparator","type":"string"}],"objectGroups":[]},{"description":"Return a string containing a number formatted by unit measure, based on the childs of a scene array variable.","fullName":"Format number by unit using a scene array variable","functionType":"StringExpression","name":"FormatByUnitScene","sentence":"","events":[{"type":"BuiltinCommonInstructions::Comment","color":{"b":109,"g":230,"r":255,"textB":0,"textG":0,"textR":0},"comment":"This sets the return value to the original number (with the specified amount of decimal houses) if none of the requirements are met."},{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"SetReturnString"},"parameters":["LargeNumberToString(floorTo(Number,DecimalHouses))"]}]},{"type":"BuiltinCommonInstructions::Comment","color":{"b":109,"g":230,"r":255,"textB":0,"textG":0,"textR":0},"comment":"This checks if the number is above or equal to 1000, because numbers below 1000 do not have separators. (Except for the one for decimal houses.)"},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"CompareArgumentAsNumber"},"parameters":["\"Number\"",">=","1000"]}],"actions":[{"type":{"value":"CopyArgumentToVariable"},"parameters":["\"Array\"","__FormatNumberExtension._Array"]},{"type":{"value":"ModVarSceneTxt"},"parameters":["__FormatNumberExtension._FormatNumber","=","LargeNumberToString(floorTo(Number / pow(1000, floor((StrLength(LargeNumberToString(floor(Number))) - 1) / 3)),clamp(DecimalHouses,0,3))) + VariableString(__FormatNumberExtension._Array[floor((StrLength(LargeNumberToString(floor(Number))) - 1) / 3) - 1])"]}],"events":[{"type":"BuiltinCommonInstructions::Comment","color":{"b":109,"g":230,"r":255,"textB":0,"textG":0,"textR":0},"comment":"Replace the default dot with the specified decimal separator."},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"CompareArgumentAsNumber"},"parameters":["\"DecimalHouses\"",">","0"]}],"actions":[{"type":{"value":"ModVarSceneTxt"},"parameters":["__FormatNumberExtension._FormatNumber","=","SubStr(VariableString(__FormatNumberExtension._FormatNumber),0,StrFind(VariableString(__FormatNumberExtension._FormatNumber),\".\"))+DecimalSeparator+SubStr(VariableString(__FormatNumberExtension._FormatNumber),StrFind(VariableString(__FormatNumberExtension._FormatNumber),\".\")+1,StrLength(VariableString(__FormatNumberExtension._FormatNumber)) - StrFind(VariableString(__FormatNumberExtension._FormatNumber),\".\"))"]}]},{"type":"BuiltinCommonInstructions::Comment","color":{"b":109,"g":230,"r":255,"textB":0,"textG":0,"textR":0},"comment":"Remove unexpected decimal separator at the beginning. (When the \"Houses\" parameter is not 0 but the number is not suitable to decimal houses splitting.)"},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"BuiltinCommonInstructions::CompareStrings"},"parameters":["StrAt(VariableString(__FormatNumberExtension._FormatNumber),0)","=","DecimalSeparator"]}],"actions":[{"type":{"value":"ModVarSceneTxt"},"parameters":["__FormatNumberExtension._FormatNumber","=","SubStr(VariableString(__FormatNumberExtension._FormatNumber),1,StrLength(VariableString(__FormatNumberExtension._FormatNumber)) - 1)"]}]},{"type":"BuiltinCommonInstructions::Comment","color":{"b":109,"g":230,"r":255,"textB":0,"textG":0,"textR":0},"comment":"Return the new number as string."},{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"SetReturnString"},"parameters":["VariableString(__FormatNumberExtension._FormatNumber)"]}]}]}],"expressionType":{"type":"string"},"parameters":[{"description":"Number to format","name":"Number","type":"expression"},{"description":"Scene array variable","name":"Array","supplementaryInformation":"[\",\",\".\"]","type":"scenevar"},{"description":"Number of decimal houses (default: 0, maximum: 3)","name":"DecimalHouses","type":"expression"},{"description":"Decimal houses separator (ommited if decimal houses is 0)","name":"DecimalSeparator","type":"string"}],"objectGroups":[]},{"description":"Return a string containing a number formatted by unit measure, based on the childs of a global array variable. This is not guaranteed to work in future GDevelop releases, use at your own risk.","fullName":"Format number by unit using a global array variable","functionType":"StringExpression","name":"FormatByUnitGlobal","private":true,"sentence":"The first index where _PARAM2_ can be found in _PARAM1_","events":[{"type":"BuiltinCommonInstructions::Comment","color":{"b":109,"g":230,"r":255,"textB":0,"textG":0,"textR":0},"comment":"This sets the return value to the original number (with the specified amount of decimal houses) if none of the requirements are met."},{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"SetReturnString"},"parameters":["LargeNumberToString(floorTo(Number,DecimalHouses))"]}]},{"type":"BuiltinCommonInstructions::Comment","color":{"b":109,"g":230,"r":255,"textB":0,"textG":0,"textR":0},"comment":"This checks if the number is above or equal to 1000, because numbers below 1000 do not have separators. (Except for the one for decimal houses.)"},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"CompareArgumentAsNumber"},"parameters":["\"Number\"",">=","1000"]}],"actions":[{"type":{"value":"CopyArgumentToVariable"},"parameters":["\"Array\"","__FormatNumberExtension._Array"]},{"type":{"value":"ModVarSceneTxt"},"parameters":["__FormatNumberExtension._FormatNumber","=","LargeNumberToString(floorTo(Number / pow(1000, floor((StrLength(LargeNumberToString(floor(Number))) - 1) / 3)),clamp(DecimalHouses,0,3))) + VariableString(__FormatNumberExtension._Array[floor((StrLength(LargeNumberToString(floor(Number))) - 1) / 3) - 1])"]}],"events":[{"type":"BuiltinCommonInstructions::Comment","color":{"b":109,"g":230,"r":255,"textB":0,"textG":0,"textR":0},"comment":"Replace the default dot with the specified decimal separator."},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"CompareArgumentAsNumber"},"parameters":["\"DecimalHouses\"",">","0"]}],"actions":[{"type":{"value":"ModVarSceneTxt"},"parameters":["__FormatNumberExtension._FormatNumber","=","SubStr(VariableString(__FormatNumberExtension._FormatNumber),0,StrFind(VariableString(__FormatNumberExtension._FormatNumber),\".\"))+DecimalSeparator+SubStr(VariableString(__FormatNumberExtension._FormatNumber),StrFind(VariableString(__FormatNumberExtension._FormatNumber),\".\")+1,StrLength(VariableString(__FormatNumberExtension._FormatNumber)) - StrFind(VariableString(__FormatNumberExtension._FormatNumber),\".\"))"]}]},{"type":"BuiltinCommonInstructions::Comment","color":{"b":109,"g":230,"r":255,"textB":0,"textG":0,"textR":0},"comment":"Remove unexpected decimal separator at the beginning. (When the \"Houses\" parameter is not 0 but the number is not suitable to decimal houses splitting.)"},{"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"value":"BuiltinCommonInstructions::CompareStrings"},"parameters":["StrAt(VariableString(__FormatNumberExtension._FormatNumber),0)","=","DecimalSeparator"]}],"actions":[{"type":{"value":"ModVarSceneTxt"},"parameters":["__FormatNumberExtension._FormatNumber","=","SubStr(VariableString(__FormatNumberExtension._FormatNumber),1,StrLength(VariableString(__FormatNumberExtension._FormatNumber)) - 1)"]}]},{"type":"BuiltinCommonInstructions::Comment","color":{"b":109,"g":230,"r":255,"textB":0,"textG":0,"textR":0},"comment":"Return the new number as string."},{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"SetReturnString"},"parameters":["VariableString(__FormatNumberExtension._FormatNumber)"]}]}]}],"expressionType":{"type":"string"},"parameters":[{"description":"Number to format","name":"Number","type":"expression"},{"description":"Array","name":"Array","type":"globalvar"},{"description":"Number of decimal houses (default: 0, maximum: 3)","name":"DecimalHouses","type":"expression"},{"description":"Decimal houses separator (ommited if decimal houses is 0)","name":"DecimalSeparator","type":"string"}],"objectGroups":[]},{"description":"Insert a character at the specified position of a text.","fullName":"Insert character","functionType":"StringExpression","name":"StrInsert","private":true,"sentence":"","events":[{"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"value":"SetReturnString"},"parameters":["SubStr(String,0,Position)+Character+SubStr(String,Position ,StrLength(String) - Position)"]}]}],"expressionType":{"type":"string"},"parameters":[{"description":"Text","name":"String","type":"string"},{"description":"Position (the first letter is at position 0)","name":"Position","type":"expression"},{"description":"Character to add","name":"Character","type":"string"}],"objectGroups":[]}],"eventsBasedBehaviors":[],"eventsBasedObjects":[]}