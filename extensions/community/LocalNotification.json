{
  "author": "",
  "category": "Advanced",
  "extensionNamespace": "",
  "fullName": "Local notification",
  "helpPath": "",
  "iconUrl": "data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAyMy4wLjMsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0iSWNvbnMiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4Ig0KCSB2aWV3Qm94PSIwIDAgMzIgMzIiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDMyIDMyOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+DQo8Zz4NCgk8cGF0aCBkPSJNMjYuOCwyNUg1LjJjLTAuOCwwLTEuNS0wLjQtMS45LTEuMWMtMC40LTAuNy0wLjMtMS41LDAuMS0yLjJMNC41LDIwYzEuOC0yLjcsMi43LTUuOCwyLjctOWMwLTMuNywyLjQtNy4xLDUuOS04LjMNCgkJQzEzLjcsMS42LDE0LjgsMSwxNiwxczIuMywwLjYsMi45LDEuN2MzLjUsMS4yLDUuOSw0LjYsNS45LDguM2MwLDMuMiwwLjksNi4zLDIuNyw5bDEuMSwxLjdjMC40LDAuNywwLjUsMS41LDAuMSwyLjINCgkJQzI4LjQsMjQuNiwyNy42LDI1LDI2LjgsMjV6Ii8+DQo8L2c+DQo8cGF0aCBkPSJNMTEuMSwyN2MwLjUsMi4zLDIuNSw0LDQuOSw0czQuNC0xLjcsNC45LTRIMTEuMXoiLz4NCjwvc3ZnPg0K",
  "name": "LocalNotification",
  "previewIconUrl": "https://asset-resources.gdevelop.io/public-resources/Icons/Glyphster Pack/Master/SVG/UI Essentials/471c40650163a6ed6eda461408e95b801a0f09f2918c38c9c974f375678fc109_UI Essentials_notification_alarm_bell.svg",
  "shortDescription": "Send scheduled notifications without internet connection required.",
  "version": "0.0.1",
  "description": "Send notification with icon and banner attachment repeatedly or when a specific date and time comes or after a countdown.",
  "tags": [
    "local",
    "notification",
    "mobile"
  ],
  "authorIds": [
    "lj8txSYs8QPfahnyD8MFO4XvMv02"
  ],
  "dependencies": [
    {
      "exportName": "cordova-plugin-local-notification",
      "name": "The local-notification plugin",
      "type": "cordova",
      "version": "1.0.0"
    },
    {
      "exportName": "cordova-plugin-doze-optimize",
      "name": "Whitelisting an Android application programmatically",
      "type": "cordova",
      "version": "0.5.4"
    }
  ],
  "globalVariables": [],
  "sceneVariables": [],
  "eventsFunctions": [
    {
      "description": "Ask to ignore battery optimization from Android user.\nIf battery optimization is not ignored, notifications may not be sent when the app is closed and will all be sent at once when the app is opened.",
      "fullName": "Request to ignore battery optimization",
      "functionType": "Action",
      "group": "Permissions",
      "name": "IgnoreBatteryOptimization",
      "sentence": "Request to ignore battery optimization",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "value": "SystemInfo::IsNativeMobileApp"
              },
              "parameters": []
            }
          ],
          "actions": [],
          "events": [
            {
              "type": "BuiltinCommonInstructions::JsCode",
              "inlineCode": "cordova.plugins.DozeOptimize.RequestOptimizations();",
              "parameterObjects": "",
              "useStrict": true,
              "eventsSheetExpanded": false
            }
          ]
        }
      ],
      "parameters": [],
      "objectGroups": []
    },
    {
      "description": "Ask the user to grant permission to send notifications.",
      "fullName": "Request to send notifications",
      "functionType": "Action",
      "group": "Permissions",
      "name": "NotificationPermission",
      "sentence": "Request to send notifications",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "value": "SystemInfo::IsNativeMobileApp"
              },
              "parameters": []
            }
          ],
          "actions": [],
          "events": [
            {
              "type": "BuiltinCommonInstructions::JsCode",
              "inlineCode": "cordova.plugins.notification.local.requestPermission();",
              "parameterObjects": "",
              "useStrict": true,
              "eventsSheetExpanded": false
            }
          ]
        }
      ],
      "parameters": [],
      "objectGroups": []
    },
    {
      "description": "Create a notification to be sent at a specified time.",
      "fullName": "Schedule a notification",
      "functionType": "Action",
      "name": "ScheduleNotification",
      "sentence": "Schedule a notification with ID _PARAM1_, title _PARAM2_ and send it at _PARAM4_",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "value": "SystemInfo::IsNativeMobileApp"
              },
              "parameters": []
            }
          ],
          "actions": [],
          "events": [
            {
              "type": "BuiltinCommonInstructions::JsCode",
              "inlineCode": [
                "const properties = {};",
                "properties[\"id\"] = eventsFunctionContext.getArgument(\"ID\");",
                "properties[\"title\"] = eventsFunctionContext.getArgument(\"Title\");",
                "properties[\"text\"] = eventsFunctionContext.getArgument(\"Text\");",
                "properties[\"trigger\"] = JSON.parse(eventsFunctionContext.getArgument(\"Trigger\"));",
                "properties[\"attachments\"] = [eventsFunctionContext.getArgument(\"Attachment\")];",
                "properties[\"icon\"] = eventsFunctionContext.getArgument(\"Icon\");",
                "properties[\"foreground\"] = eventsFunctionContext.getArgument(\"Foreground\");",
                "",
                "cordova.plugins.notification.local.schedule(properties);"
              ],
              "parameterObjects": "",
              "useStrict": true,
              "eventsSheetExpanded": false
            }
          ]
        }
      ],
      "parameters": [
        {
          "description": "Notification ID",
          "name": "ID",
          "type": "expression"
        },
        {
          "description": "Title",
          "name": "Title",
          "type": "string"
        },
        {
          "description": "Text",
          "name": "Text",
          "type": "string"
        },
        {
          "description": "Trigger",
          "longDescription": "When or how often the notification is sent.\nThe expressions `Fix`, `Timespan` or `Repeat` must be used.",
          "name": "Trigger",
          "type": "string"
        },
        {
          "description": "Attachment",
          "longDescription": "URL of an image to display when notification gets expanded.\nThe notification will be sent without it if it is not accessible.",
          "name": "Attachment",
          "type": "string"
        },
        {
          "description": "Icon",
          "longDescription": "URL of an image to display alongside text and title.\nThe notification will be sent without it if it is not accessible.",
          "name": "Icon",
          "type": "string"
        },
        {
          "defaultValue": "yes",
          "description": "Show in foreground?",
          "name": "Foreground",
          "optional": true,
          "type": "yesorno"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "Format a trigger date to schedule a local notification.",
      "fullName": "Trigger at a fix date",
      "functionType": "StringExpression",
      "name": "Fix",
      "sentence": "",
      "events": [
        {
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": [
            "const date = { at: new Date(eventsFunctionContext.getArgument(\"Year\"), eventsFunctionContext.getArgument(\"Month\"), eventsFunctionContext.getArgument(\"Day\"), eventsFunctionContext.getArgument(\"Hours\"), eventsFunctionContext.getArgument(\"Minutes\"), eventsFunctionContext.getArgument(\"Seconds\"), eventsFunctionContext.getArgument(\"Milliseconds\")) };",
            "",
            "eventsFunctionContext.returnValue = JSON.stringify(date);"
          ],
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "expressionType": {
        "type": "string"
      },
      "parameters": [
        {
          "description": "Year",
          "name": "Year",
          "type": "expression"
        },
        {
          "description": "Month",
          "longDescription": "0 for January, 11 for december.",
          "name": "Month",
          "type": "expression"
        },
        {
          "description": "Day",
          "longDescription": "Day of the month (1 to 31)",
          "name": "Day",
          "type": "expression"
        },
        {
          "description": "Hours",
          "name": "Hours",
          "type": "expression"
        },
        {
          "description": "Minutes",
          "name": "Minutes",
          "type": "expression"
        },
        {
          "description": "Seconds",
          "name": "Seconds",
          "type": "expression"
        },
        {
          "description": "Milliseconds",
          "name": "Milliseconds",
          "type": "expression"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "Format a trigger countdown to schedule a local notification.",
      "fullName": "Trigger relative from now",
      "functionType": "StringExpression",
      "name": "Timespan",
      "sentence": "",
      "events": [
        {
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": [
            "const countdown = {};",
            "countdown[\"in\"] = eventsFunctionContext.getArgument(\"In\");",
            "countdown[\"unit\"] = eventsFunctionContext.getArgument(\"Unit\");",
            "",
            "eventsFunctionContext.returnValue = JSON.stringify(countdown);"
          ],
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "expressionType": {
        "type": "string"
      },
      "parameters": [
        {
          "description": "Countdown value",
          "name": "In",
          "type": "expression"
        },
        {
          "description": "Countdown unit",
          "name": "Unit",
          "supplementaryInformation": "[\"second\",\"minute\",\"hour\",\"day\",\"week\",\"month\",\"quarter\",\"year\"]",
          "type": "stringWithSelector"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "Format a repeat rate to schedule a local notification.",
      "fullName": "Repeat relative from now",
      "functionType": "StringExpression",
      "name": "Repeat",
      "sentence": "",
      "events": [
        {
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": [
            "const countdown = {};",
            "countdown[\"count\"] = eventsFunctionContext.getArgument(\"Count\");",
            "countdown[\"every\"] = eventsFunctionContext.getArgument(\"Every\");",
            "",
            "eventsFunctionContext.returnValue = JSON.stringify(countdown);"
          ],
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "expressionType": {
        "type": "string"
      },
      "parameters": [
        {
          "description": "Repeat rate",
          "name": "Count",
          "type": "expression"
        },
        {
          "description": "Repeat unit",
          "name": "Every",
          "supplementaryInformation": "[\"second\",\"minute\",\"hour\",\"day\",\"week\",\"month\",\"quarter\",\"year\"]",
          "type": "stringWithSelector"
        }
      ],
      "objectGroups": []
    }
  ],
  "eventsBasedBehaviors": [],
  "eventsBasedObjects": []
}