{
  "author": "@4ian",
  "category": "Movement",
  "extensionNamespace": "",
  "fullName": "Bounce",
  "helpPath": "/extensions/bounce/explanations",
  "iconUrl": "data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0ibWRpLXZvbGxleWJhbGwiIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJNMTIsMkExMCwxMCAwIDAsMSAyMiwxMkExMCwxMCAwIDAsMSAxMiwyMkExMCwxMCAwIDAsMSAyLDEyQTEwLDEwIDAgMCwxIDEyLDJNMTMuNiwyMC4zNUMxNS45NiwxOC4wNCAxNy42OSwxNS4wOCAxOC41LDExLjc2QzE3Ljg0LDExLjYyIDE3LjE4LDExLjU0IDE2LjUsMTEuNUMxNS41NiwxNS4xMSAxMy40MSwxOC4yMiAxMC41LDIwLjM3QzExLDIwLjQ1IDExLjUsMjAuNSAxMiwyMC41QzEyLjU1LDIwLjUgMTMuMDgsMjAuNDUgMTMuNiwyMC4zNU05LjIzLDIwLjA0QzEyLjIzLDE4LjA3IDE0LjUsMTUuMDUgMTUuNDYsMTEuNUMxNC43MSwxMS41NSAxMy45NywxMS42NSAxMy4yNywxMS44MUMxMi4xOCwxNC44OSA5Ljk3LDE3LjQ0IDcuMTMsMTguOTdDNy43NywxOS40MiA4LjUsMTkuNzggOS4yMywyMC4wNE0yMC41LDEyLjM3QzIwLjE2LDEyLjIzIDE5LjgxLDEyLjExIDE5LjQ2LDEyQzE4Ljc2LDE0LjkgMTcuMzksMTcuNTMgMTUuNTQsMTkuNzNDMTguMzYsMTguNDQgMjAuMzUsMTUuNjQgMjAuNSwxMi4zN00zLjU2LDExLjA0QzMuNSwxMS4zNSAzLjUsMTEuNjggMy41LDEyQzMuNSwxNC41IDQuNTcsMTYuNzMgNi4yNywxOC4yOEM2Ljg2LDE4IDcuNDEsMTcuNjYgNy45NCwxNy4yOUM2LjA4LDE1LjU0IDQuNTgsMTMuNDEgMy41NiwxMS4wNE01LjMzLDYuNzRDNC43Myw3LjUgNC4yNiw4LjM1IDMuOTUsOS4yOEM0LjkyLDEyLjEzIDYuNTgsMTQuNjYgOC43NCwxNi42N0M5LjI1LDE2LjI0IDkuNzIsMTUuNzcgMTAuMTUsMTUuMjZDNy43NCwxMy4wMyA2LDEwLjA4IDUuMzMsNi43NE04LjA0LDQuNUM3LjM2LDQuODUgNi43Myw1LjMgNi4xOCw1LjgyQzYuNzEsOS4yMSA4LjM3LDEyLjIzIDEwLjc3LDE0LjQ3QzExLjE3LDEzLjkxIDExLjUsMTMuMzIgMTEuODIsMTIuN0M5LjY4LDEwLjU2IDguMjgsNy42OSA4LjA0LDQuNU0xOS45Niw5LjAzQzE4LjcsOC42OCAxNy4zNyw4LjUgMTYsOC41QzE0LjEsOC41IDEyLjI4LDguODUgMTAuNjEsOS41QzEwLjk2LDEwLjEgMTEuMzUsMTAuNjcgMTEuOCwxMS4yQzEzLjEyLDEwLjc1IDE0LjUzLDEwLjUgMTYsMTAuNUMxNy41NywxMC41IDE5LjA4LDEwLjc4IDIwLjQ3LDExLjI5QzIwLjQsMTAuNSAyMC4yMyw5Ljc0IDE5Ljk2LDkuMDNNMTcuNTQsNS41N0MxNy4wMyw1LjUgMTYuNSw1LjUgMTYsNS41QzEzLjY5LDUuNSAxMS40Nyw1Ljk0IDkuNDQsNi43M0M5LjYyLDcuMzggOS44Niw4IDEwLjE0LDguNjFDMTEuOTYsNy44OSAxMy45Myw3LjUgMTYsNy41QzE3LjE4LDcuNSAxOC4zMiw3LjYzIDE5LjQyLDcuODdDMTguOTMsNyAxOC4yOSw2LjIxIDE3LjU0LDUuNTdNMTYsNC41QzE0Ljc5LDMuODcgMTMuNDQsMy41IDEyLDMuNUMxMC45NSwzLjUgOS45NCwzLjcgOSw0LjA1QzkuMDQsNC42MyA5LjExLDUuMiA5LjIxLDUuNzVDMTEuMzEsNC45NSAxMy42LDQuNSAxNiw0LjVaIiAvPjwvc3ZnPg==",
  "name": "Bounce",
  "previewIconUrl": "https://resources.gdevelop-app.com/assets/Icons/volleyball.svg",
  "shortDescription": "Make an object bounce away from another object",
  "version": "0.1.0",
  "description": [
    "Provides an action to make the object bounce away from another object it just touched. A permanent force is applied to the object when it is in collision with another object, which makes it bounce realistically.",
    "",
    "*Bounce count* can be used to trigger actions after the object bounces a certain number of times, such as bullets that ricochet off a few walls.",
    "",
    "Note: ",
    "- This only works with objects that are moved by actions or behaviors that use **forces**.",
    "- This behavior is *not* compatible with the Physics or Platformer Character behaviors.",
    "- Bouncing an object instance off another instance of the same object will have inconsistent results. "
  ],
  "tags": [
    "bounce",
    "bullet",
    "ricochet"
  ],
  "authorIds": [
    "wWP8BSlAW0UP4NeaHa2LcmmDzmH2",
    "gqDaZjCfevOOxBYkK6zlhtZnXCg1"
  ],
  "dependencies": [],
  "eventsFunctions": [],
  "eventsBasedBehaviors": [
    {
      "description": "Make an object bounce away from another object.",
      "fullName": "Bounce",
      "name": "Bounce",
      "objectType": "",
      "eventsFunctions": [
        {
          "description": "Bounce the object away from another object. Use a condition to check when the objects are colliding.",
          "fullName": "Bounce away from another object",
          "functionType": "Action",
          "name": "BounceOff",
          "sentence": "Bounce _PARAM0_ away from _PARAM2_",
          "events": [
            {
              "type": "BuiltinCommonInstructions::Comment",
              "color": {
                "b": 109,
                "g": 230,
                "r": 255,
                "textB": 0,
                "textG": 0,
                "textR": 0
              },
              "comment": "To bounce the object realistically, we first separate it from the obstacle. The collision engine will do it by moving the object through the shortest \"normal vector\" of the edge that was collided.\nWe store the position of the object before being moved so that we know the angle of this \"normal vector\". Once we know it, we add a force in the direction of the normal vector, and we add the difference between the normal vector and the previous angle of movement.\nAll the forces will be removed from the object, and a new permanent force will be added to make the object bounce.",
              "comment2": ""
            },
            {
              "type": "BuiltinCommonInstructions::Standard",
              "conditions": [],
              "actions": [
                {
                  "type": {
                    "value": "Bounce::Bounce::SetPropertyOldX"
                  },
                  "parameters": [
                    "Object",
                    "Behavior",
                    "=",
                    "Object.X()"
                  ]
                },
                {
                  "type": {
                    "value": "Bounce::Bounce::SetPropertyOldY"
                  },
                  "parameters": [
                    "Object",
                    "Behavior",
                    "=",
                    "Object.Y()"
                  ]
                },
                {
                  "type": {
                    "value": "Bounce::Bounce::SetPropertyOldForceAngle"
                  },
                  "parameters": [
                    "Object",
                    "Behavior",
                    "=",
                    "Object.ForceAngle()"
                  ]
                },
                {
                  "type": {
                    "value": "Bounce::Bounce::SetPropertyOldForceLength"
                  },
                  "parameters": [
                    "Object",
                    "Behavior",
                    "=",
                    "Object.ForceLength()"
                  ]
                },
                {
                  "type": {
                    "value": "SeparateFromObjects"
                  },
                  "parameters": [
                    "Object",
                    "Obstacle",
                    "yes"
                  ]
                }
              ],
              "events": [
                {
                  "type": "BuiltinCommonInstructions::Standard",
                  "conditions": [
                    {
                      "type": {
                        "value": "BuiltinCommonInstructions::Or"
                      },
                      "parameters": [],
                      "subInstructions": [
                        {
                          "type": {
                            "value": "PosX"
                          },
                          "parameters": [
                            "Object",
                            "!=",
                            "Object.Behavior::PropertyOldX()"
                          ]
                        },
                        {
                          "type": {
                            "value": "PosY"
                          },
                          "parameters": [
                            "Object",
                            "!=",
                            "Object.Behavior::PropertyOldY()"
                          ]
                        }
                      ]
                    }
                  ],
                  "actions": [
                    {
                      "type": {
                        "value": "Bounce::Bounce::SetPropertyNormalAngle"
                      },
                      "parameters": [
                        "Object",
                        "Behavior",
                        "=",
                        "ToDeg(atan2(Object.Y() - Object.Behavior::PropertyOldY(), Object.X() - Object.Behavior::PropertyOldX()))"
                      ]
                    },
                    {
                      "type": {
                        "value": "Arreter"
                      },
                      "parameters": [
                        "Object"
                      ]
                    },
                    {
                      "type": {
                        "value": "AddForceAL"
                      },
                      "parameters": [
                        "Object",
                        "Object.Behavior::PropertyNormalAngle()+AngleDifference(Object.Behavior::PropertyNormalAngle(), Object.Behavior::PropertyOldForceAngle()+180)",
                        "Object.Behavior::PropertyOldForceLength()",
                        "1"
                      ]
                    },
                    {
                      "type": {
                        "value": "Bounce::Bounce::SetPropertyBounceCount"
                      },
                      "parameters": [
                        "Object",
                        "Behavior",
                        "+",
                        "1"
                      ]
                    }
                  ]
                }
              ]
            }
          ],
          "parameters": [
            {
              "description": "Object",
              "name": "Object",
              "type": "object"
            },
            {
              "description": "Behavior",
              "name": "Behavior",
              "supplementaryInformation": "Bounce::Bounce",
              "type": "behavior"
            },
            {
              "description": "Objects to bounce away from",
              "name": "Obstacle",
              "type": "objectList"
            }
          ],
          "objectGroups": []
        },
        {
          "description": "the bounce count of the object. Number of times the object has bounced away from another object",
          "fullName": "Bounce count",
          "functionType": "ExpressionAndCondition",
          "group": "Bounce configuration",
          "name": "BounceCount",
          "sentence": "the bounce count",
          "events": [
            {
              "type": "BuiltinCommonInstructions::Standard",
              "conditions": [],
              "actions": [
                {
                  "type": {
                    "value": "SetReturnNumber"
                  },
                  "parameters": [
                    "Object.Behavior::PropertyBounceCount()"
                  ]
                }
              ]
            }
          ],
          "expressionType": {
            "type": "expression"
          },
          "parameters": [
            {
              "description": "Object",
              "name": "Object",
              "type": "object"
            },
            {
              "description": "Behavior",
              "name": "Behavior",
              "supplementaryInformation": "Bounce::Bounce",
              "type": "behavior"
            }
          ],
          "objectGroups": []
        }
      ],
      "propertyDescriptors": [
        {
          "value": "0",
          "type": "Number",
          "label": "",
          "description": "",
          "group": "",
          "extraInformation": [],
          "hidden": true,
          "name": "OldX"
        },
        {
          "value": "",
          "type": "Number",
          "label": "",
          "description": "",
          "group": "",
          "extraInformation": [],
          "hidden": true,
          "name": "OldY"
        },
        {
          "value": "",
          "type": "Number",
          "label": "",
          "description": "",
          "group": "",
          "extraInformation": [],
          "hidden": true,
          "name": "OldForceAngle"
        },
        {
          "value": "",
          "type": "Number",
          "label": "",
          "description": "",
          "group": "",
          "extraInformation": [],
          "hidden": true,
          "name": "OldForceLength"
        },
        {
          "value": "",
          "type": "Number",
          "label": "",
          "description": "",
          "group": "",
          "extraInformation": [],
          "hidden": true,
          "name": "NormalAngle"
        },
        {
          "value": "0",
          "type": "Number",
          "unit": "Dimensionless",
          "label": "Bounce count",
          "description": "Number of times the object has bounced away from another object",
          "group": "",
          "extraInformation": [],
          "hidden": true,
          "name": "BounceCount"
        }
      ],
      "sharedPropertyDescriptors": []
    }
  ],
  "eventsBasedObjects": []
}