{
  "author": "@4ian",
  "category": "Movement",
  "extensionNamespace": "",
  "fullName": "Bounce (using forces)",
  "helpPath": "/extensions/bounce/explanations",
  "iconUrl": "data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0ibWRpLXZvbGxleWJhbGwiIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJNMTIsMkExMCwxMCAwIDAsMSAyMiwxMkExMCwxMCAwIDAsMSAxMiwyMkExMCwxMCAwIDAsMSAyLDEyQTEwLDEwIDAgMCwxIDEyLDJNMTMuNiwyMC4zNUMxNS45NiwxOC4wNCAxNy42OSwxNS4wOCAxOC41LDExLjc2QzE3Ljg0LDExLjYyIDE3LjE4LDExLjU0IDE2LjUsMTEuNUMxNS41NiwxNS4xMSAxMy40MSwxOC4yMiAxMC41LDIwLjM3QzExLDIwLjQ1IDExLjUsMjAuNSAxMiwyMC41QzEyLjU1LDIwLjUgMTMuMDgsMjAuNDUgMTMuNiwyMC4zNU05LjIzLDIwLjA0QzEyLjIzLDE4LjA3IDE0LjUsMTUuMDUgMTUuNDYsMTEuNUMxNC43MSwxMS41NSAxMy45NywxMS42NSAxMy4yNywxMS44MUMxMi4xOCwxNC44OSA5Ljk3LDE3LjQ0IDcuMTMsMTguOTdDNy43NywxOS40MiA4LjUsMTkuNzggOS4yMywyMC4wNE0yMC41LDEyLjM3QzIwLjE2LDEyLjIzIDE5LjgxLDEyLjExIDE5LjQ2LDEyQzE4Ljc2LDE0LjkgMTcuMzksMTcuNTMgMTUuNTQsMTkuNzNDMTguMzYsMTguNDQgMjAuMzUsMTUuNjQgMjAuNSwxMi4zN00zLjU2LDExLjA0QzMuNSwxMS4zNSAzLjUsMTEuNjggMy41LDEyQzMuNSwxNC41IDQuNTcsMTYuNzMgNi4yNywxOC4yOEM2Ljg2LDE4IDcuNDEsMTcuNjYgNy45NCwxNy4yOUM2LjA4LDE1LjU0IDQuNTgsMTMuNDEgMy41NiwxMS4wNE01LjMzLDYuNzRDNC43Myw3LjUgNC4yNiw4LjM1IDMuOTUsOS4yOEM0LjkyLDEyLjEzIDYuNTgsMTQuNjYgOC43NCwxNi42N0M5LjI1LDE2LjI0IDkuNzIsMTUuNzcgMTAuMTUsMTUuMjZDNy43NCwxMy4wMyA2LDEwLjA4IDUuMzMsNi43NE04LjA0LDQuNUM3LjM2LDQuODUgNi43Myw1LjMgNi4xOCw1LjgyQzYuNzEsOS4yMSA4LjM3LDEyLjIzIDEwLjc3LDE0LjQ3QzExLjE3LDEzLjkxIDExLjUsMTMuMzIgMTEuODIsMTIuN0M5LjY4LDEwLjU2IDguMjgsNy42OSA4LjA0LDQuNU0xOS45Niw5LjAzQzE4LjcsOC42OCAxNy4zNyw4LjUgMTYsOC41QzE0LjEsOC41IDEyLjI4LDguODUgMTAuNjEsOS41QzEwLjk2LDEwLjEgMTEuMzUsMTAuNjcgMTEuOCwxMS4yQzEzLjEyLDEwLjc1IDE0LjUzLDEwLjUgMTYsMTAuNUMxNy41NywxMC41IDE5LjA4LDEwLjc4IDIwLjQ3LDExLjI5QzIwLjQsMTAuNSAyMC4yMyw5Ljc0IDE5Ljk2LDkuMDNNMTcuNTQsNS41N0MxNy4wMyw1LjUgMTYuNSw1LjUgMTYsNS41QzEzLjY5LDUuNSAxMS40Nyw1Ljk0IDkuNDQsNi43M0M5LjYyLDcuMzggOS44Niw4IDEwLjE0LDguNjFDMTEuOTYsNy44OSAxMy45Myw3LjUgMTYsNy41QzE3LjE4LDcuNSAxOC4zMiw3LjYzIDE5LjQyLDcuODdDMTguOTMsNyAxOC4yOSw2LjIxIDE3LjU0LDUuNTdNMTYsNC41QzE0Ljc5LDMuODcgMTMuNDQsMy41IDEyLDMuNUMxMC45NSwzLjUgOS45NCwzLjcgOSw0LjA1QzkuMDQsNC42MyA5LjExLDUuMiA5LjIxLDUuNzVDMTEuMzEsNC45NSAxMy42LDQuNSAxNiw0LjVaIiAvPjwvc3ZnPg==",
  "name": "Bounce",
  "previewIconUrl": "https://resources.gdevelop-app.com/assets/Icons/volleyball.svg",
  "shortDescription": "Bounce the object off another object it just touched.",
  "version": "0.2.3",
  "description": [
    "Provides an action to make the object bounce from another object it just touched.",
    "",
    "> ⚠️ This *won't work* with Physics engine or Platformer characters. This is working with objects that are moved using actions or behaviors using **the forces**.",
    "",
    "The Breakout-like example uses this extension to make balls bounce ([open the project online](https://editor.gdevelop.io/?project=example://breakout))."
  ],
  "origin": {
    "identifier": "Bounce",
    "name": "gdevelop-extension-store"
  },
  "tags": [
    "bounce",
    "bullet",
    "ricochet"
  ],
  "authorIds": [
    "wWP8BSlAW0UP4NeaHa2LcmmDzmH2"
  ],
  "dependencies": [],
  "globalVariables": [],
  "sceneVariables": [],
  "eventsFunctions": [],
  "eventsBasedBehaviors": [
    {
      "description": "Provides an action to make the object bounce from another object it just touched. Add a permanent force to the object and, when in collision with another one, use the action to make it bounce realistically.",
      "fullName": "Bounce",
      "name": "Bounce",
      "objectType": "",
      "eventsFunctions": [
        {
          "description": "Bounce the object off another object it is currently colliding with, according to the angle and the speed of forces applied on the object.\nMake sure to test for a collision between the two objects before launching this action. All the forces will be removed from the object, and a new permanent force will be added to make the object bounce.",
          "fullName": "Bounce off another object",
          "functionType": "Action",
          "name": "BounceOff",
          "sentence": "Bounce _PARAM0_ off _PARAM2_",
          "events": [
            {
              "type": "BuiltinCommonInstructions::Comment",
              "color": {
                "b": 109,
                "g": 230,
                "r": 255,
                "textB": 0,
                "textG": 0,
                "textR": 0
              },
              "comment": "To bounce the object realistically, we first separate it from the obstacle. The collision engine will do it by moving the object through the shortest \"normal vector\" of the edge that was collided.\nWe store the position of the object before being moved so that we know the angle of this \"normal vector\". Once we know it, we add a force in the direction of the normal vector, and we add the difference between the normal vector and the previous angle of movement."
            },
            {
              "type": "BuiltinCommonInstructions::Standard",
              "conditions": [],
              "actions": [
                {
                  "type": {
                    "value": "SetNumberVariable"
                  },
                  "parameters": [
                    "OldX",
                    "=",
                    "Object.X()"
                  ]
                },
                {
                  "type": {
                    "value": "SetNumberVariable"
                  },
                  "parameters": [
                    "OldY",
                    "=",
                    "Object.Y()"
                  ]
                },
                {
                  "type": {
                    "value": "SeparateFromObjects"
                  },
                  "parameters": [
                    "Object",
                    "Obstacle",
                    "yes"
                  ]
                }
              ],
              "events": [
                {
                  "type": "BuiltinCommonInstructions::Standard",
                  "conditions": [
                    {
                      "type": {
                        "value": "BuiltinCommonInstructions::Or"
                      },
                      "parameters": [],
                      "subInstructions": [
                        {
                          "type": {
                            "value": "PosX"
                          },
                          "parameters": [
                            "Object",
                            "!=",
                            "OldX"
                          ]
                        },
                        {
                          "type": {
                            "value": "PosY"
                          },
                          "parameters": [
                            "Object",
                            "!=",
                            "OldY"
                          ]
                        }
                      ]
                    }
                  ],
                  "actions": [
                    {
                      "type": {
                        "value": "SetNumberVariable"
                      },
                      "parameters": [
                        "OldForceAngle",
                        "=",
                        "Object.ForceAngle()"
                      ]
                    },
                    {
                      "type": {
                        "value": "SetNumberVariable"
                      },
                      "parameters": [
                        "OldForceLength",
                        "=",
                        "Object.ForceLength()"
                      ]
                    },
                    {
                      "type": {
                        "value": "SetNumberVariable"
                      },
                      "parameters": [
                        "NormalAngle",
                        "=",
                        "ToDeg(atan2(Object.Y() - OldY, Object.X() - OldX))"
                      ]
                    },
                    {
                      "type": {
                        "value": "Arreter"
                      },
                      "parameters": [
                        "Object"
                      ]
                    },
                    {
                      "type": {
                        "value": "AddForceAL"
                      },
                      "parameters": [
                        "Object",
                        "NormalAngle + AngleDifference(NormalAngle, OldForceAngle + 180)",
                        "OldForceLength",
                        "1"
                      ]
                    },
                    {
                      "type": {
                        "value": "Bounce::Bounce::SetPropertyBounceCount"
                      },
                      "parameters": [
                        "Object",
                        "Behavior",
                        "+",
                        "1"
                      ]
                    }
                  ],
                  "variables": [
                    {
                      "name": "OldForceAngle",
                      "type": "number",
                      "value": 0
                    },
                    {
                      "name": "OldForceLength",
                      "type": "number",
                      "value": 0
                    },
                    {
                      "name": "NormalAngle",
                      "type": "number",
                      "value": 0
                    }
                  ]
                }
              ],
              "variables": [
                {
                  "name": "OldX",
                  "type": "number",
                  "value": 0
                },
                {
                  "name": "OldY",
                  "type": "number",
                  "value": 0
                }
              ]
            }
          ],
          "parameters": [
            {
              "description": "Object",
              "name": "Object",
              "type": "object"
            },
            {
              "description": "Behavior",
              "name": "Behavior",
              "supplementaryInformation": "Bounce::Bounce",
              "type": "behavior"
            },
            {
              "description": "The objects to bounce on",
              "name": "Obstacle",
              "type": "objectList"
            }
          ],
          "objectGroups": []
        },
        {
          "description": "Bounce the object off another object it is currently colliding with, according to the angle and the speed of forces applied on the object.\nThe bounce will always be calculated *to go toward the specified angle (the \"normal angle\")*. For example, if the object is arriving at this exact angle, it will bounce in the opposite direction.\n\nMake sure to test for a collision between the two objects before launching this action. All the forces will be removed from the object, and a new permanent force will be added to make the object bounce.",
          "fullName": "Bounce off another object toward a specified angle",
          "functionType": "Action",
          "name": "BounceOffSpecificAngle",
          "sentence": "Bounce _PARAM0_ off _PARAM2_ assuming a normal angle of _PARAM3_",
          "events": [
            {
              "type": "BuiltinCommonInstructions::Comment",
              "color": {
                "b": 109,
                "g": 230,
                "r": 255,
                "textB": 0,
                "textG": 0,
                "textR": 0
              },
              "comment": "Check if there is a collision between the object and an obstacle and if so, do the bounce by stopping the object and adding a force so that it goes in the \"reflected\" direction, using the \"normal\" angle provided. \nThis provides a realistic bounce."
            },
            {
              "type": "BuiltinCommonInstructions::Standard",
              "conditions": [],
              "actions": [
                {
                  "type": {
                    "value": "SetNumberVariable"
                  },
                  "parameters": [
                    "OldX",
                    "=",
                    "Object.X()"
                  ]
                },
                {
                  "type": {
                    "value": "SetNumberVariable"
                  },
                  "parameters": [
                    "OldY",
                    "=",
                    "Object.Y()"
                  ]
                },
                {
                  "type": {
                    "value": "SeparateFromObjects"
                  },
                  "parameters": [
                    "Object",
                    "Obstacle",
                    "yes"
                  ]
                }
              ],
              "events": [
                {
                  "type": "BuiltinCommonInstructions::Standard",
                  "conditions": [
                    {
                      "type": {
                        "value": "BuiltinCommonInstructions::Or"
                      },
                      "parameters": [],
                      "subInstructions": [
                        {
                          "type": {
                            "value": "PosX"
                          },
                          "parameters": [
                            "Object",
                            "!=",
                            "OldX"
                          ]
                        },
                        {
                          "type": {
                            "value": "PosY"
                          },
                          "parameters": [
                            "Object",
                            "!=",
                            "OldY"
                          ]
                        }
                      ]
                    }
                  ],
                  "actions": [
                    {
                      "type": {
                        "value": "SetNumberVariable"
                      },
                      "parameters": [
                        "OldForceAngle",
                        "=",
                        "Object.ForceAngle()"
                      ]
                    },
                    {
                      "type": {
                        "value": "SetNumberVariable"
                      },
                      "parameters": [
                        "OldForceLength",
                        "=",
                        "Object.ForceLength()"
                      ]
                    },
                    {
                      "type": {
                        "value": "Arreter"
                      },
                      "parameters": [
                        "Object"
                      ]
                    },
                    {
                      "type": {
                        "value": "AddForceAL"
                      },
                      "parameters": [
                        "Object",
                        "NormalAngle + AngleDifference(NormalAngle, OldForceAngle + 180)",
                        "OldForceLength",
                        "1"
                      ]
                    },
                    {
                      "type": {
                        "value": "Bounce::Bounce::SetPropertyBounceCount"
                      },
                      "parameters": [
                        "Object",
                        "Behavior",
                        "+",
                        "1"
                      ]
                    }
                  ],
                  "variables": [
                    {
                      "name": "OldForceAngle",
                      "type": "number",
                      "value": 0
                    },
                    {
                      "name": "OldForceLength",
                      "type": "number",
                      "value": 0
                    }
                  ]
                }
              ],
              "variables": [
                {
                  "name": "OldX",
                  "type": "number",
                  "value": 0
                },
                {
                  "name": "OldY",
                  "type": "number",
                  "value": 0
                }
              ]
            }
          ],
          "parameters": [
            {
              "description": "Object",
              "name": "Object",
              "type": "object"
            },
            {
              "description": "Behavior",
              "name": "Behavior",
              "supplementaryInformation": "Bounce::Bounce",
              "type": "behavior"
            },
            {
              "description": "The objects to bounce on",
              "name": "Obstacle",
              "type": "objectList"
            },
            {
              "description": "The \"normal\" angle, in degrees, to bounce against",
              "longDescription": "This can be understood at the direction that the bounce must go toward.",
              "name": "NormalAngle",
              "type": "expression"
            }
          ],
          "objectGroups": []
        },
        {
          "description": "Bounce the object off another object it is currently colliding with, according to the angle and the speed of forces applied on the object.\nThe bounce will always be vertical, like if the object is *colliding a perfectly horizontal obstacle* (like the top/bottom of the screen in a pong game). For example, if the object is arriving with an angle of exactly 90 degrees, it will bounce in the opposite direction: -90 degrees.\n\nMake sure to test for a collision between the two objects before launching this action. All the forces will be removed from the object, and a new permanent force will be added to make the object bounce.",
          "fullName": "Bounce vertically",
          "functionType": "Action",
          "name": "BounceOffVertically",
          "sentence": "Bounce _PARAM0_ off _PARAM2_ - always vertically",
          "events": [
            {
              "type": "BuiltinCommonInstructions::Standard",
              "conditions": [],
              "actions": [
                {
                  "type": {
                    "value": "Bounce::Bounce::BounceOffSpecificAngle"
                  },
                  "parameters": [
                    "Object",
                    "Behavior",
                    "Obstacle",
                    "90",
                    ""
                  ]
                }
              ]
            }
          ],
          "parameters": [
            {
              "description": "Object",
              "name": "Object",
              "type": "object"
            },
            {
              "description": "Behavior",
              "name": "Behavior",
              "supplementaryInformation": "Bounce::Bounce",
              "type": "behavior"
            },
            {
              "description": "The objects to bounce on",
              "name": "Obstacle",
              "type": "objectList"
            }
          ],
          "objectGroups": []
        },
        {
          "description": "Bounce the object off another object it is currently colliding with, according to the angle and the speed of forces applied on the object.\nThe bounce will always be horizontal, like if the object is *colliding a perfectly vertical obstacle* (like paddles in a pong game). For example, if the object is arriving with an angle of exactly 0 degrees, it will bounce in the opposite direction: 180 degrees.\n\nMake sure to test for a collision between the two objects before launching this action. All the forces will be removed from the object, and a new permanent force will be added to make the object bounce.",
          "fullName": "Bounce horizontally",
          "functionType": "Action",
          "name": "BounceOffHorizontally",
          "sentence": "Bounce _PARAM0_ off _PARAM2_ - always horizontally",
          "events": [
            {
              "type": "BuiltinCommonInstructions::Standard",
              "conditions": [],
              "actions": [
                {
                  "type": {
                    "value": "Bounce::Bounce::BounceOffSpecificAngle"
                  },
                  "parameters": [
                    "Object",
                    "Behavior",
                    "Obstacle",
                    "0",
                    ""
                  ]
                }
              ]
            }
          ],
          "parameters": [
            {
              "description": "Object",
              "name": "Object",
              "type": "object"
            },
            {
              "description": "Behavior",
              "name": "Behavior",
              "supplementaryInformation": "Bounce::Bounce",
              "type": "behavior"
            },
            {
              "description": "The objects to bounce on",
              "name": "Obstacle",
              "type": "objectList"
            }
          ],
          "objectGroups": []
        },
        {
          "description": "the number of times this object has bounced off another object.",
          "fullName": "Bounce count",
          "functionType": "ExpressionAndCondition",
          "name": "BounceCount",
          "sentence": "the bounce count",
          "events": [
            {
              "type": "BuiltinCommonInstructions::Standard",
              "conditions": [],
              "actions": [
                {
                  "type": {
                    "value": "SetReturnNumber"
                  },
                  "parameters": [
                    "BounceCount"
                  ]
                }
              ]
            }
          ],
          "expressionType": {
            "type": "expression"
          },
          "parameters": [
            {
              "description": "Object",
              "name": "Object",
              "type": "object"
            },
            {
              "description": "Behavior",
              "name": "Behavior",
              "supplementaryInformation": "Bounce::Bounce",
              "type": "behavior"
            }
          ],
          "objectGroups": []
        }
      ],
      "propertyDescriptors": [
        {
          "value": "0",
          "type": "Number",
          "unit": "Dimensionless",
          "label": "Bounce count",
          "description": "Number of times this object has bounced off another object",
          "group": "",
          "extraInformation": [],
          "hidden": true,
          "name": "BounceCount"
        }
      ],
      "sharedPropertyDescriptors": []
    }
  ],
  "eventsBasedObjects": []
}