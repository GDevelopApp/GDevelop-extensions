{
  "author": "",
  "category": "Visual effect",
  "description": "This extension allows to restyle a sprite, a tiled sprite or a panel sprite.\n\nIt can be used to:\n- Change the color of player short according to its team color.\n- Add small color variation to trees of a forest.\n- Restyle objects to match other assets.\n\nAn example shows how to change the 2 main colors of an object ([open the project online](https://editor.gdevelop.io/?project=example://recolorizer)).\n\nThis extension is experimental and might no longer work in future version of GDevelop.",
  "extensionNamespace": "",
  "fullName": "Object recolorizer (experimental)",
  "helpPath": "",
  "iconUrl": "data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAyMy4wLjMsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0iSWNvbnMiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4Ig0KCSB2aWV3Qm94PSIwIDAgMzIgMzIiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDMyIDMyOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+DQo8c3R5bGUgdHlwZT0idGV4dC9jc3MiPg0KCS5zdDB7ZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoyO3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2UtbWl0ZXJsaW1pdDoxMDt9DQoJLnN0MXtmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjI7c3Ryb2tlLWxpbmVjYXA6cm91bmQ7c3Ryb2tlLWxpbmVqb2luOnJvdW5kO30NCgkuc3Qye2ZpbGw6bm9uZTtzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MjtzdHJva2UtbGluZWNhcDpyb3VuZDtzdHJva2UtbGluZWpvaW46cm91bmQ7c3Ryb2tlLWRhc2hhcnJheTo2LDY7fQ0KCS5zdDN7ZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoyO3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2UtZGFzaGFycmF5OjQsNDt9DQoJLnN0NHtmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjI7c3Ryb2tlLWxpbmVjYXA6cm91bmQ7fQ0KCS5zdDV7ZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoyO3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1kYXNoYXJyYXk6My4xMDgxLDMuMTA4MTt9DQoJDQoJCS5zdDZ7ZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoyO3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2UtbWl0ZXJsaW1pdDoxMDtzdHJva2UtZGFzaGFycmF5OjQsMzt9DQo8L3N0eWxlPg0KPHBhdGggY2xhc3M9InN0MCIgZD0iTTE2LjksMTRjLTEuOCwwLTMuMywxLjQtMy4zLDMuMXYwLjdjMCwxLjEtMC42LDEuOS0xLjYsMi4ybDAsMGgxLjZsMy4xLDBjMS44LDAsMy40LTEuNCwzLjMtMy4xDQoJQzIwLDE1LjMsMTguNiwxNCwxNi45LDE0eiIvPg0KPHBhdGggY2xhc3M9InN0MCIgZD0iTTIwLjMsMTEuNUMxOC45LDExLjIsMTcuNSwxMSwxNiwxMWMtNy4yLDAtMTMsNC0xMyw5YzAsMSwwLjIsMiwwLjcsMi45YzEsMiwzLjYsMi42LDUuNCwxLjNsMCwwDQoJYzIuNC0xLjcsNS44LDAsNS44LDNWMjljMC40LDAsMC43LDAsMS4xLDBjNy4yLDAsMTMtNCwxMy05YzAtMi4yLTEuMS00LjItMi45LTUuNyIvPg0KPHBhdGggY2xhc3M9InN0MCIgZD0iTTE3LjQsMTQuMWw5LjgtOC44YzAuNC0wLjQsMS4xLTAuNCwxLjUsMGwwLDBjMC40LDAuNCwwLjQsMSwwLDEuNEwyMCwxNiIvPg0KPC9zdmc+DQo=",
  "name": "Recolorizer",
  "previewIconUrl": "https://resources.gdevelop-app.com/assets/Icons/Line Hero Pack/Master/SVG/Graphic Design/Graphic Design_color_colour_palette_paint_brush.svg",
  "shortDescription": "Independently change the colors of a sprite, a tiled sprite or a panel sprite.",
  "version": "0.1.1",
  "tags": [
    "color",
    "hue",
    "saturation",
    "lightness",
    "HSL",
    "HSV",
    "RGB"
  ],
  "authorIds": [
    "IWykYNRvhCZBN3vEgKEbBPOR3Oc2"
  ],
  "dependencies": [],
  "eventsFunctions": [
    {
      "description": "Define JavaScript classes.",
      "fullName": "Define JavaScript classes",
      "functionType": "Action",
      "group": "",
      "name": "DefineJavaScript",
      "private": true,
      "sentence": "Define JavaScript classes",
      "events": [
        {
          "disabled": false,
          "folded": false,
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "inverted": false,
                "value": "GlobalVariableAsBoolean"
              },
              "parameters": [
                "__Recolorizer_IsDefined",
                "False"
              ],
              "subInstructions": []
            }
          ],
          "actions": [
            {
              "type": {
                "inverted": false,
                "value": "SetGlobalVariableAsBoolean"
              },
              "parameters": [
                "__Recolorizer_IsDefined",
                "True"
              ],
              "subInstructions": []
            }
          ],
          "events": [
            {
              "disabled": false,
              "folded": false,
              "type": "BuiltinCommonInstructions::JsCode",
              "inlineCode": "/**\n * Converts an HSL color value to RGB. Conversion formula\n * adapted from http://en.wikipedia.org/wiki/HSL_color_space.\n * Assumes h, s, and l are contained in the set [0, 1] and\n * returns r, g, and b in the set [0, 255].\n * https://stackoverflow.com/questions/2353211/hsl-to-rgb-color-conversion\n *\n * @param   {number}  h       The hue\n * @param   {number}  s       The saturation\n * @param   {number}  l       The lightness\n * @return  {number[]}           The RGB representation\n */\nconst hslToRgb = function (h, s, l) {\n    var r, g, b;\n\n    if (s == 0) {\n        r = g = b = l; // achromatic\n    } else {\n        var hue2rgb = function hue2rgb(p, q, t) {\n            if (t < 0) t += 1;\n            if (t > 1) t -= 1;\n            if (t < 1 / 6) return p + (q - p) * 6 * t;\n            if (t < 1 / 2) return q;\n            if (t < 2 / 3) return p + (q - p) * (2 / 3 - t) * 6;\n            return p;\n        }\n\n        var q = l < 0.5 ? l * (1 + s) : l + s - l * s;\n        var p = 2 * l - q;\n        r = hue2rgb(p, q, h + 1 / 3);\n        g = hue2rgb(p, q, h);\n        b = hue2rgb(p, q, h - 1 / 3);\n    }\n\n    return [Math.round(r * 255), Math.round(g * 255), Math.round(b * 255)];\n}\n\n/**\n * Converts an RGB color value to HSL. Conversion formula\n * adapted from http://en.wikipedia.org/wiki/HSL_color_space.\n * Assumes r, g, and b are contained in the set [0, 255] and\n * returns h, s, and l in the set [0, 1].\n * https://stackoverflow.com/questions/2353211/hsl-to-rgb-color-conversion\n *\n * @param   {number}  r       The red color value\n * @param   {number}  g       The green color value\n * @param   {number}  b       The blue color value\n * @return  {number[]}           The HSL representation\n */\nconst rgbToHsl = function (r, g, b) {\n    r /= 255, g /= 255, b /= 255;\n    var max = Math.max(r, g, b), min = Math.min(r, g, b);\n    var h, s, l = (max + min) / 2;\n\n    if (max == min) {\n        h = s = 0; // achromatic\n    } else {\n        var d = max - min;\n        s = l > 0.5 ? d / (2 - max - min) : d / (max + min);\n        switch (max) {\n            case r: h = (g - b) / d + (g < b ? 6 : 0); break;\n            case g: h = (b - r) / d + 2; break;\n            case b: h = (r - g) / d + 4; break;\n        }\n        h /= 6;\n    }\n\n    return [h, s, l];\n}\n\n/**\n * @param {HTMLCanvasElement} canvas\n * @param {PIXI.Texture} texture\n * @returns {HTMLCanvasElement}\n */\nconst resetCanvas = function (canvas, texture) {\n    const context = canvas.getContext('2d');\n    const crop = texture._frame;\n    context.save();\n    context.globalCompositeOperation = 'copy';\n    context.drawImage(\n        texture.baseTexture.getDrawableSource(),\n        crop.x,\n        crop.y,\n        crop.width,\n        crop.height,\n        0,\n        0,\n        crop.width,\n        crop.height\n    );\n    context.restore();\n    return canvas;\n}\n\n/**\n * Replace a color with an other one.\n *\n * @param {HTMLCanvasElement} sourceCanvas\n * @param {HTMLCanvasElement} targetCanvas\n * @param {{x: number, y: number, width: number, height: number}} frame\n * @param {[number, number, number]} originColor The color to replace from.\n * @param {[number, number, number]} targetColor The color to replate to.\n * @param {number} hueScope Pixels within the hue scope relatively from originColor are recolorized.\n * @param {number} saturationScope Pixels within the saturation scope relatively from originColor are recolorized.\n * @param {number} lighnessScope Pixels within the lightness scope relatively from originColor are recolorized.\n */\nconst recolorizeTexture = function (sourceCanvas, targetCanvas, frame, originColor, targetColor, hueScope, saturationScope, lighnessScope) {\n    const sourceContext = sourceCanvas.getContext('2d');\n    const targetContext = targetCanvas.getContext('2d');\n    const sourcePixels = sourceContext.getImageData(0, 0, frame.width, frame.height).data;\n    const targetImageData = targetContext.getImageData(0, 0, frame.width, frame.height);\n    const targetPixels = targetImageData.data;\n\n    const originColorHSL = rgbToHsl(originColor[0], originColor[1], originColor[2]);\n    const targetColorHSL = rgbToHsl(targetColor[0], targetColor[1], targetColor[2]);\n\n    const originHue = originColorHSL[0];\n    const originSaturation = originColorHSL[1];\n    const originLightness = originColorHSL[2];\n\n    const targetHue = targetColorHSL[0];\n    const targetSaturation = targetColorHSL[1];\n    const saturationDelta = targetSaturation - originSaturation;\n    const lightnessDelta = targetColorHSL[2] - originLightness;\n\n    // hue is not knowned for graycase colors.\n    const hueIsConstrained = hueScope < 0.5;\n\n    for (let i = 0; i < sourcePixels.length; i += 4) {\n        const pixelHsl = rgbToHsl(sourcePixels[i + 0], sourcePixels[i + 1], sourcePixels[i + 2]);\n\n        const pixelHue = pixelHsl[0];\n        const pixelSaturation = pixelHsl[1];\n        const pixelLightness = pixelHsl[2];\n\n        const hueDelta = gdjs.evtTools.common.mod(pixelHue - originHue + 0.5, 1) - 0.5;\n        if ((!hueIsConstrained || Math.abs(hueDelta) <= hueScope)\n         && Math.abs(pixelSaturation - originSaturation) <= saturationScope\n         && Math.abs(pixelLightness - originLightness) <= lighnessScope) {\n            // graycase pixels must take the targeted hue\n            pixelHsl[0] = pixelSaturation === 0 ? targetHue : gdjs.evtTools.common.mod(pixelHue - originHue + targetHue, 1);\n            // white pixels must also take the targeted saturation.\n            pixelHsl[1] = pixelLightness > 0.999 ? targetSaturation : gdjs.evtTools.common.clamp(pixelSaturation + saturationDelta, 0, 1);\n            pixelHsl[2] = gdjs.evtTools.common.clamp(pixelLightness + lightnessDelta, 0, 1);\n            const pixelRgb = hslToRgb(pixelHsl[0], pixelHsl[1], pixelHsl[2]);\n            targetPixels[i + 0] = pixelRgb[0];\n            targetPixels[i + 1] = pixelRgb[1];\n            targetPixels[i + 2] = pixelRgb[2];\n        }\n    }\n    targetContext.putImageData(targetImageData, 0, 0);\n};\n\n/**\n * @param {[number, number, number]} originColor The color to replace from.\n * @param {[number, number, number]} targetColor The color to replate to.\n * @param {number} hueScope Pixels within the hue scope relatively from originColor are recolorized.\n * @param {number} saturationScope Pixels within the saturation scope relatively from originColor are recolorized.\n * @param {number} lighnessScope Pixels within the lightness scope relatively from originColor are recolorized.\n * @return {number} key\n */\nconst getRecolorizationKey = function (originColor, targetColor, hueScope, saturationScope, lighnessScope) {\n    return String.fromCharCode(originColor[0] * (2 ** 8) + originColor[1],\n        originColor[2] * (2 ** 8) + targetColor[0],\n        targetColor[1] * (2 ** 8) + targetColor[2],\n        (hueScope * (2 ** 8) + saturationScope) * (2 ** 8),\n        lighnessScope * (2 ** 8));\n}\n\ngdjs.__recolorizerExtension = gdjs.__recolorizerExtension || {};\n\n/**\n * @param {PIXI.Texture} texture\n * @returns {HTMLCanvasElement}\n */\ngdjs.__recolorizerExtension.getCanvas = function (texture) {\n    /** @type {HTMLCanvasElement} */\n    const canvas = document.createElement('canvas');\n\n    const context = canvas.getContext('2d');\n    const crop = texture._frame.clone();\n    const resolution = texture.baseTexture.resolution;\n\n    crop.x *= resolution;\n    crop.y *= resolution;\n    crop.width *= resolution;\n    crop.height *= resolution;\n\n    canvas.width = Math.ceil(crop.width);\n    canvas.height = Math.ceil(crop.height);\n\n    context.save();\n    context.globalCompositeOperation = 'copy';\n    context.drawImage(\n        texture.baseTexture.getDrawableSource(),\n        crop.x,\n        crop.y,\n        crop.width,\n        crop.height,\n        0,\n        0,\n        crop.width,\n        crop.height\n    );\n    context.restore();\n\n    return canvas;\n}\n\n/**\n * Manage recolorizations to ensure uniqueness of textures.\n **/\ngdjs.__recolorizerExtension.RecolorizationManager = /** @class */ (function () {\n    /**\n     * Create a manager.\n     * @param {PIXI.Texture[]} sourceTextures\n     */\n    function RecolorizationManager(sourceTextures) {\n        /** @type {PIXI.Texture[]} */\n        this.sourceTextures = sourceTextures;\n        this.sourceCanvas = sourceTextures.map(texture => gdjs.__recolorizerExtension.getCanvas(texture));\n        /** @type {Map<string, {userCount: integer, textures: PIXI.Texture[], canvas: HTMLCanvasElement[]}>} */\n        this.recolorizedSprites = new Map();\n        /** @type {Array<{userCount: integer, textures: PIXI.Texture[], canvas: HTMLCanvasElement[]}>} */\n        this.recycledRecolorizedSprites = [];\n    }\n\n    /**\n     * Unregister a recoloration usage.\n     *\n     * @param {string} previousRecolorizationKey\n     */\n    RecolorizationManager.prototype.unregister = function (previousRecolorizationKey) {\n        const previousRecolorizedSprite = this.recolorizedSprites.get(previousRecolorizationKey);\n        if (previousRecolorizedSprite) {\n            previousRecolorizedSprite.userCount--;\n            if (previousRecolorizedSprite.userCount <= 0) {\n                this.recolorizedSprites.delete(previousRecolorizationKey);\n                this.recycledRecolorizedSprites.push(previousRecolorizedSprite);\n            }\n        }\n    }\n\n    /**\n     * Register a recolorization usage and get recolored textures.\n     *\n     * @param {string} recolorizationKey\n     * @param {Array<{originColor: [number, number, number], targetColor: [number, number, number], hueScope: number, saturationScope: number, lighnessScope: number}>} recolorizations\n     * @returns {PIXI.Texture[]} \n     */\n    RecolorizationManager.prototype.register = function (recolorizationKey, recolorizations) {\n        if (recolorizationKey === \"\") {\n            return this.sourceTextures;\n        }\n\n        /** @type {PIXI.Texture[]} */\n        let targetTextures;\n        let recolorizedSprite = this.recolorizedSprites.get(recolorizationKey);\n        if (recolorizedSprite) {\n            targetTextures = recolorizedSprite.textures;\n        }\n        else {\n            if (this.recycledRecolorizedSprites.length > 0) {\n                const reusableRecolorizedSprite = this.recycledRecolorizedSprites.pop();\n                targetTextures = reusableRecolorizedSprite.textures;\n                /** @type {PIXI.Texture[]} */\n                const targetCanvas = reusableRecolorizedSprite.canvas;\n\n                for (let textureIndex = 0; textureIndex < this.sourceTextures.length; textureIndex++) {\n                    const sourceTexture = this.sourceTextures[textureIndex];\n                    const targetCanva = targetCanvas[textureIndex];\n                    resetCanvas(targetCanva, sourceTexture);\n                }\n\n                this._recolorizeAll(targetCanvas, recolorizations);\n\n                targetTextures.forEach(texture => texture.update());\n                reusableRecolorizedSprite.userCount = 0;\n                recolorizedSprite = reusableRecolorizedSprite;\n            }\n            else {\n                /** @type {PIXI.Texture[]} */\n                const targetCanvas = this.sourceTextures.map(texture => gdjs.__recolorizerExtension.getCanvas(texture));\n\n                this._recolorizeAll(targetCanvas, recolorizations);\n\n                targetTextures = targetCanvas.map(targetCanva => PIXI.Texture.from(targetCanva));\n                recolorizedSprite = { userCount: 0, textures: targetTextures, canvas: targetCanvas };\n            }\n            this.recolorizedSprites.set(recolorizationKey, recolorizedSprite);\n        }\n        recolorizedSprite.userCount++;\n        return targetTextures;\n    }\n\n    /**\n     * Apply a recoloration to every textures.\n     *\n     * @param {HTMLCanvasElement[]} targetCanvas\n     * @param {Array<{originColor: [number, number, number], targetColor: [number, number, number], hueScope: number, saturationScope: number, lighnessScope: number}>} recolorizations\n     */\n    RecolorizationManager.prototype._recolorizeAll = function (targetCanvas, recolorizations) {\n        for (let textureIndex = 0; textureIndex < this.sourceTextures.length; textureIndex++) {\n            const sourceTexture = this.sourceTextures[textureIndex];\n            const targetCanva = targetCanvas[textureIndex];\n            const frame = sourceTexture._frame;\n            for (const recolorization of recolorizations) {\n                recolorizeTexture(\n                    this.sourceCanvas[textureIndex],\n                    targetCanva,\n                    frame,\n                    recolorization.originColor,\n                    recolorization.targetColor,\n                    recolorization.hueScope,\n                    recolorization.saturationScope,\n                    recolorization.lighnessScope\n                );\n            }\n        }\n    }\n\n    return RecolorizationManager;\n}());\n\n/**\n * Object recolorizer.\n **/\ngdjs.__recolorizerExtension.Recolorizer = /** @class */ (function () {\n    /**\n     * Create an object recolorizer.\n     * @param {gdjs.__recolorizerExtension.RecolorizationManager} manager\n     * @param {{texture: PIXI.Texture[]}} sourceTextureConatiners\n     */\n    function Recolorizer(manager, sourceTextureContainers) {\n        this.manager = manager;\n        this.sourceTextureContainers = sourceTextureContainers;\n\n        this.previousRecolorizationKey = \"\";\n        this.recolorizationKey = \"\";\n        /** @type {Array<{originColor: [number, number, number], targetColor: [number, number, number], hueScope: number, saturationScope: number, lighnessScope: number}>} */\n        this.recolorizations = [];\n    }\n\n    /**\n     * Replace a color with an other one.\n     *\n     * @param {[number, number, number]} originColor The color to replace from.\n     * @param {[number, number, number]} targetColor The color to replate to.\n     * @param {number} hueScope Pixels within the hue scope relatively from originColor are recolorized.\n     * @param {number} saturationScope Pixels within the saturation scope relatively from originColor are recolorized.\n     * @param {number} lighnessScope Pixels within the lightness scope relatively from originColor are recolorized.\n     */\n    Recolorizer.prototype.recolorizeSprite = function (originColor, targetColor, hueScope, saturationScope, lighnessScope) {\n        this.recolorizationKey += getRecolorizationKey(originColor, targetColor, hueScope, saturationScope, lighnessScope);\n        this.recolorizations.push({ originColor, targetColor, hueScope, saturationScope, lighnessScope});\n    }\n\n    /**\n     * Reset the default textures of the object.\n     */\n    Recolorizer.prototype.resetSprite = function () {\n        this.recolorizationKey = \"\";\n        this.recolorizations = [];\n    }\n\n    /**\n     * Update the textures of the object.\n     */\n    Recolorizer.prototype.updateSprite = function () {\n        const needsRecolorization = this.recolorizationKey !== this.previousRecolorizationKey;\n        if (needsRecolorization) {\n            this.manager.unregister(this.previousRecolorizationKey);\n\n            /** @type {PIXI.Texture[]} */\n            const targetTextures = this.manager.register(this.recolorizationKey, this.recolorizations);\n\n            let textureIndex = 0;\n            for (const container of this.sourceTextureContainers) {\n                container.texture = targetTextures[textureIndex];\n                textureIndex++;\n            }\n            this.previousRecolorizationKey = this.recolorizationKey;\n        }\n        return needsRecolorization;\n    }\n\n    return Recolorizer;\n}());",
              "parameterObjects": "",
              "useStrict": true,
              "eventsSheetExpanded": true
            }
          ]
        }
      ],
      "parameters": [],
      "objectGroups": []
    }
  ],
  "eventsBasedBehaviors": [
    {
      "description": "Independently change the colors of a sprite.",
      "fullName": "Sprite recolorizer",
      "name": "SpriteRecolorizer",
      "objectType": "Sprite",
      "eventsFunctions": [
        {
          "description": "",
          "fullName": "",
          "functionType": "Action",
          "group": "",
          "name": "onCreated",
          "private": false,
          "sentence": "",
          "events": [
            {
              "disabled": false,
              "folded": false,
              "type": "BuiltinCommonInstructions::Standard",
              "conditions": [],
              "actions": [
                {
                  "type": {
                    "inverted": false,
                    "value": "Recolorizer::DefineJavaScript"
                  },
                  "parameters": [
                    "",
                    ""
                  ],
                  "subInstructions": []
                }
              ],
              "events": []
            },
            {
              "disabled": false,
              "folded": false,
              "type": "BuiltinCommonInstructions::JsCode",
              "inlineCode": "/** @type {gdjs.SpriteRuntimeObject} */\nconst sprite = objects[0];\nconst behaviorName = eventsFunctionContext.getBehaviorName(\"Behavior\");\nconst behavior = sprite.getBehavior(behaviorName);\n\nif (!runtimeScene.__recolorizerExtension) {\n    runtimeScene.__recolorizerExtension = { managers: new Map()};\n}\n/** @type {Map} */\nconst managers = runtimeScene.__recolorizerExtension.managers || new Map();\nlet manager = managers.get(sprite.getName());\nif (!manager) {\n    /** @type {PIXI.Texture[]} */\n    const sourceTextures = [];\n    for (const animation of sprite._animations) {\n        for (const direction of animation.directions) {\n            for (const frame of direction.frames) {\n                sourceTextures.push(frame.texture);\n            }\n        }\n    }\n    manager = new gdjs.__recolorizerExtension.RecolorizationManager(sourceTextures);\n    managers.set(sprite.getName(), manager);\n}\n\n/** @type {{texture: PIXI.Texture[]}} */\nconst sourceTextureContainers = [];\nfor (const animation of sprite._animations) {\n    for (const direction of animation.directions) {\n        for (const frame of direction.frames) {\n            sourceTextureContainers.push(frame);\n        }\n    }\n}\n\nbehavior.recolorizer = new gdjs.__recolorizerExtension.Recolorizer(\n    manager,\n    sourceTextureContainers\n);",
              "parameterObjects": "Object",
              "useStrict": true,
              "eventsSheetExpanded": true
            }
          ],
          "parameters": [
            {
              "codeOnly": false,
              "defaultValue": "",
              "description": "Object",
              "longDescription": "",
              "name": "Object",
              "optional": false,
              "supplementaryInformation": "Sprite",
              "type": "object"
            },
            {
              "codeOnly": false,
              "defaultValue": "",
              "description": "Behavior",
              "longDescription": "",
              "name": "Behavior",
              "optional": false,
              "supplementaryInformation": "Recolorizer::SpriteRecolorizer",
              "type": "behavior"
            }
          ],
          "objectGroups": []
        },
        {
          "description": "Replace a given color of an object with another one. The scope allows to change similar colors at once.",
          "fullName": "Recolorize",
          "functionType": "Action",
          "group": "",
          "name": "Recolorize",
          "private": false,
          "sentence": "Recolorize _PARAM0_ from color _PARAM2_ to color _PARAM3_ within a scope of  hue: _PARAM4_° saturation: _PARAM5_% lightness: _PARAM6_%",
          "events": [
            {
              "disabled": false,
              "folded": false,
              "type": "BuiltinCommonInstructions::JsCode",
              "inlineCode": "const behaviorName = eventsFunctionContext.getBehaviorName(\"Behavior\");\nconst behavior = objects[0].getBehavior(behaviorName);\n\nconst originColor = gdjs.rgbOrHexToRGBColor(eventsFunctionContext.getArgument(\"OriginColor\"));\nconst targetColor = gdjs.rgbOrHexToRGBColor(eventsFunctionContext.getArgument(\"TargetColor\"));\nconst hueScope = gdjs.evtTools.common.clamp(eventsFunctionContext.getArgument(\"HueScope\") / 360, 0, 180);\nconst saturationScope = gdjs.evtTools.common.clamp(eventsFunctionContext.getArgument(\"SaturationScope\") / 100, 0, 50);\nconst lightnessScope = gdjs.evtTools.common.clamp(eventsFunctionContext.getArgument(\"LightnessScope\") / 100, 0, 50);\n\nbehavior.recolorizer.recolorizeSprite(originColor, targetColor, hueScope, saturationScope, lightnessScope);",
              "parameterObjects": "Object",
              "useStrict": true,
              "eventsSheetExpanded": true
            }
          ],
          "parameters": [
            {
              "codeOnly": false,
              "defaultValue": "",
              "description": "Object",
              "longDescription": "",
              "name": "Object",
              "optional": false,
              "supplementaryInformation": "Sprite",
              "type": "object"
            },
            {
              "codeOnly": false,
              "defaultValue": "",
              "description": "Behavior",
              "longDescription": "",
              "name": "Behavior",
              "optional": false,
              "supplementaryInformation": "Recolorizer::SpriteRecolorizer",
              "type": "behavior"
            },
            {
              "codeOnly": false,
              "defaultValue": "",
              "description": "Origin color",
              "longDescription": "",
              "name": "OriginColor",
              "optional": false,
              "supplementaryInformation": "",
              "type": "color"
            },
            {
              "codeOnly": false,
              "defaultValue": "",
              "description": "Target color",
              "longDescription": "",
              "name": "TargetColor",
              "optional": false,
              "supplementaryInformation": "",
              "type": "color"
            },
            {
              "codeOnly": false,
              "defaultValue": "",
              "description": "Hue scope (from 0° to 180°)",
              "longDescription": "",
              "name": "HueScope",
              "optional": false,
              "supplementaryInformation": "",
              "type": "expression"
            },
            {
              "codeOnly": false,
              "defaultValue": "",
              "description": "Saturation scope (in percent)",
              "longDescription": "",
              "name": "SaturationScope",
              "optional": false,
              "supplementaryInformation": "",
              "type": "expression"
            },
            {
              "codeOnly": false,
              "defaultValue": "",
              "description": "Lightness scope (in percent)",
              "longDescription": "",
              "name": "LightnessScope",
              "optional": false,
              "supplementaryInformation": "",
              "type": "expression"
            }
          ],
          "objectGroups": []
        },
        {
          "description": "Set back the original colors of an object.",
          "fullName": "Reset color",
          "functionType": "Action",
          "group": "",
          "name": "ResetColor",
          "private": false,
          "sentence": "Reset the colors of _PARAM0_",
          "events": [
            {
              "disabled": false,
              "folded": false,
              "type": "BuiltinCommonInstructions::JsCode",
              "inlineCode": "const behaviorName = eventsFunctionContext.getBehaviorName(\"Behavior\");\nconst behavior = objects[0].getBehavior(behaviorName);\n\nbehavior.recolorizer.resetSprite();",
              "parameterObjects": "Object",
              "useStrict": true,
              "eventsSheetExpanded": true
            }
          ],
          "parameters": [
            {
              "codeOnly": false,
              "defaultValue": "",
              "description": "Object",
              "longDescription": "",
              "name": "Object",
              "optional": false,
              "supplementaryInformation": "Sprite",
              "type": "object"
            },
            {
              "codeOnly": false,
              "defaultValue": "",
              "description": "Behavior",
              "longDescription": "",
              "name": "Behavior",
              "optional": false,
              "supplementaryInformation": "Recolorizer::SpriteRecolorizer",
              "type": "behavior"
            }
          ],
          "objectGroups": []
        },
        {
          "description": "",
          "fullName": "",
          "functionType": "Action",
          "group": "",
          "name": "doStepPostEvents",
          "private": false,
          "sentence": "",
          "events": [
            {
              "disabled": false,
              "folded": false,
              "type": "BuiltinCommonInstructions::JsCode",
              "inlineCode": "\r\n/** @type {gdjs.SpriteRuntimeObject} */\r\nconst sprite = objects[0];\r\nconst behaviorName = eventsFunctionContext.getBehaviorName(\"Behavior\");\r\nconst behavior = sprite.getBehavior(behaviorName);\r\n\r\nconst recolorized = behavior.recolorizer.updateSprite();\r\nif (recolorized) {\r\n    sprite._animationFrameDirty = true;\r\n}",
              "parameterObjects": "Object",
              "useStrict": true,
              "eventsSheetExpanded": true
            }
          ],
          "parameters": [
            {
              "codeOnly": false,
              "defaultValue": "",
              "description": "Object",
              "longDescription": "",
              "name": "Object",
              "optional": false,
              "supplementaryInformation": "Sprite",
              "type": "object"
            },
            {
              "codeOnly": false,
              "defaultValue": "",
              "description": "Behavior",
              "longDescription": "",
              "name": "Behavior",
              "optional": false,
              "supplementaryInformation": "Recolorizer::SpriteRecolorizer",
              "type": "behavior"
            }
          ],
          "objectGroups": []
        },
        {
          "description": "",
          "fullName": "",
          "functionType": "Action",
          "group": "",
          "name": "onDestroy",
          "private": false,
          "sentence": "",
          "events": [
            {
              "disabled": false,
              "folded": false,
              "type": "BuiltinCommonInstructions::Comment",
              "color": {
                "b": 109,
                "g": 230,
                "r": 255,
                "textB": 0,
                "textG": 0,
                "textR": 0
              },
              "comment": "Unsure that destroyed instance recolorization can be free.",
              "comment2": ""
            },
            {
              "disabled": false,
              "folded": false,
              "type": "BuiltinCommonInstructions::Standard",
              "conditions": [],
              "actions": [
                {
                  "type": {
                    "inverted": false,
                    "value": "Recolorizer::SpriteRecolorizer::ResetColor"
                  },
                  "parameters": [
                    "Object",
                    "Behavior",
                    ""
                  ],
                  "subInstructions": []
                }
              ],
              "events": []
            }
          ],
          "parameters": [
            {
              "codeOnly": false,
              "defaultValue": "",
              "description": "Object",
              "longDescription": "",
              "name": "Object",
              "optional": false,
              "supplementaryInformation": "Sprite",
              "type": "object"
            },
            {
              "codeOnly": false,
              "defaultValue": "",
              "description": "Behavior",
              "longDescription": "",
              "name": "Behavior",
              "optional": false,
              "supplementaryInformation": "Recolorizer::SpriteRecolorizer",
              "type": "behavior"
            }
          ],
          "objectGroups": []
        }
      ],
      "propertyDescriptors": []
    },
    {
      "description": "Independently change the colors of a tiled sprite.",
      "fullName": "Tiled sprite recolorizer",
      "name": "TiledSpriteRecolorizer",
      "objectType": "TiledSpriteObject::TiledSprite",
      "eventsFunctions": [
        {
          "description": "",
          "fullName": "",
          "functionType": "Action",
          "group": "",
          "name": "onCreated",
          "private": false,
          "sentence": "",
          "events": [
            {
              "disabled": false,
              "folded": false,
              "type": "BuiltinCommonInstructions::Standard",
              "conditions": [],
              "actions": [
                {
                  "type": {
                    "inverted": false,
                    "value": "Recolorizer::DefineJavaScript"
                  },
                  "parameters": [
                    "",
                    ""
                  ],
                  "subInstructions": []
                }
              ],
              "events": []
            },
            {
              "disabled": false,
              "folded": false,
              "type": "BuiltinCommonInstructions::JsCode",
              "inlineCode": "/** @type {gdjs.TiledSpriteRuntimeObject} */\nconst tiledSprite = objects[0];\nconst behaviorName = eventsFunctionContext.getBehaviorName(\"Behavior\");\nconst behavior = tiledSprite.getBehavior(behaviorName);\n\nif (!runtimeScene.__recolorizerExtension) {\n    runtimeScene.__recolorizerExtension = { managers: new Map()};\n}\n/** @type {Map} */\nconst managers = runtimeScene.__recolorizerExtension.managers || new Map();\nlet manager = managers.get(tiledSprite.getName());\nif (!manager) {\n    /** @type {PIXI.TilingSprite} */\n    const tilingSprite = tiledSprite.getRendererObject();\n    manager = new gdjs.__recolorizerExtension.RecolorizationManager([tilingSprite.texture]);\n    managers.set(tiledSprite.getName(), manager);\n}\n\nbehavior.recolorizer = new gdjs.__recolorizerExtension.Recolorizer(\n    manager,\n    [tiledSprite.getRendererObject()]\n);\n",
              "parameterObjects": "Object",
              "useStrict": true,
              "eventsSheetExpanded": true
            }
          ],
          "parameters": [
            {
              "codeOnly": false,
              "defaultValue": "",
              "description": "Object",
              "longDescription": "",
              "name": "Object",
              "optional": false,
              "supplementaryInformation": "TiledSpriteObject::TiledSprite",
              "type": "object"
            },
            {
              "codeOnly": false,
              "defaultValue": "",
              "description": "Behavior",
              "longDescription": "",
              "name": "Behavior",
              "optional": false,
              "supplementaryInformation": "Recolorizer::TiledSpriteRecolorizer",
              "type": "behavior"
            }
          ],
          "objectGroups": []
        },
        {
          "description": "Replace a given color of an object with another one. The scope allows to change similar colors at once.",
          "fullName": "Recolorize",
          "functionType": "Action",
          "group": "",
          "name": "Recolorize",
          "private": false,
          "sentence": "Recolorize _PARAM0_ from color _PARAM2_ to color _PARAM3_ within a scope of  hue: _PARAM4_° saturation: _PARAM5_% lightness: _PARAM6_%",
          "events": [
            {
              "disabled": false,
              "folded": false,
              "type": "BuiltinCommonInstructions::JsCode",
              "inlineCode": "const behaviorName = eventsFunctionContext.getBehaviorName(\"Behavior\");\nconst behavior = objects[0].getBehavior(behaviorName);\n\nconst originColor = gdjs.rgbOrHexToRGBColor(eventsFunctionContext.getArgument(\"OriginColor\"));\nconst targetColor = gdjs.rgbOrHexToRGBColor(eventsFunctionContext.getArgument(\"TargetColor\"));\nconst hueScope = gdjs.evtTools.common.clamp(eventsFunctionContext.getArgument(\"HueScope\") / 360, 0, 180);\nconst saturationScope = gdjs.evtTools.common.clamp(eventsFunctionContext.getArgument(\"SaturationScope\") / 100, 0, 50);\nconst lightnessScope = gdjs.evtTools.common.clamp(eventsFunctionContext.getArgument(\"LightnessScope\") / 100, 0, 50);\n\nbehavior.recolorizer.recolorizeSprite(originColor, targetColor, hueScope, saturationScope, lightnessScope);",
              "parameterObjects": "Object",
              "useStrict": true,
              "eventsSheetExpanded": true
            }
          ],
          "parameters": [
            {
              "codeOnly": false,
              "defaultValue": "",
              "description": "Object",
              "longDescription": "",
              "name": "Object",
              "optional": false,
              "supplementaryInformation": "TiledSpriteObject::TiledSprite",
              "type": "object"
            },
            {
              "codeOnly": false,
              "defaultValue": "",
              "description": "Behavior",
              "longDescription": "",
              "name": "Behavior",
              "optional": false,
              "supplementaryInformation": "Recolorizer::TiledSpriteRecolorizer",
              "type": "behavior"
            },
            {
              "codeOnly": false,
              "defaultValue": "",
              "description": "Origin color",
              "longDescription": "",
              "name": "OriginColor",
              "optional": false,
              "supplementaryInformation": "",
              "type": "color"
            },
            {
              "codeOnly": false,
              "defaultValue": "",
              "description": "Target color",
              "longDescription": "",
              "name": "TargetColor",
              "optional": false,
              "supplementaryInformation": "",
              "type": "color"
            },
            {
              "codeOnly": false,
              "defaultValue": "",
              "description": "Hue scope (from 0° to 180°)",
              "longDescription": "",
              "name": "HueScope",
              "optional": false,
              "supplementaryInformation": "",
              "type": "expression"
            },
            {
              "codeOnly": false,
              "defaultValue": "",
              "description": "Saturation scope (in percent)",
              "longDescription": "",
              "name": "SaturationScope",
              "optional": false,
              "supplementaryInformation": "",
              "type": "expression"
            },
            {
              "codeOnly": false,
              "defaultValue": "",
              "description": "Lightness scope (in percent)",
              "longDescription": "",
              "name": "LightnessScope",
              "optional": false,
              "supplementaryInformation": "",
              "type": "expression"
            }
          ],
          "objectGroups": []
        },
        {
          "description": "Set back the original colors of an object.",
          "fullName": "Reset color",
          "functionType": "Action",
          "group": "",
          "name": "ResetColor",
          "private": false,
          "sentence": "Reset the colors of _PARAM0_",
          "events": [
            {
              "disabled": false,
              "folded": false,
              "type": "BuiltinCommonInstructions::JsCode",
              "inlineCode": "const behaviorName = eventsFunctionContext.getBehaviorName(\"Behavior\");\nconst behavior = objects[0].getBehavior(behaviorName);\n\nbehavior.recolorizer.resetSprite();",
              "parameterObjects": "Object",
              "useStrict": true,
              "eventsSheetExpanded": true
            }
          ],
          "parameters": [
            {
              "codeOnly": false,
              "defaultValue": "",
              "description": "Object",
              "longDescription": "",
              "name": "Object",
              "optional": false,
              "supplementaryInformation": "TiledSpriteObject::TiledSprite",
              "type": "object"
            },
            {
              "codeOnly": false,
              "defaultValue": "",
              "description": "Behavior",
              "longDescription": "",
              "name": "Behavior",
              "optional": false,
              "supplementaryInformation": "Recolorizer::TiledSpriteRecolorizer",
              "type": "behavior"
            }
          ],
          "objectGroups": []
        },
        {
          "description": "",
          "fullName": "",
          "functionType": "Action",
          "group": "",
          "name": "doStepPostEvents",
          "private": false,
          "sentence": "",
          "events": [
            {
              "disabled": false,
              "folded": false,
              "type": "BuiltinCommonInstructions::JsCode",
              "inlineCode": "\r\nconst object = objects[0];\r\nconst behaviorName = eventsFunctionContext.getBehaviorName(\"Behavior\");\r\nconst behavior = object.getBehavior(behaviorName);\r\n\r\nconst recolorized = behavior.recolorizer.updateSprite();",
              "parameterObjects": "Object",
              "useStrict": true,
              "eventsSheetExpanded": true
            }
          ],
          "parameters": [
            {
              "codeOnly": false,
              "defaultValue": "",
              "description": "Object",
              "longDescription": "",
              "name": "Object",
              "optional": false,
              "supplementaryInformation": "TiledSpriteObject::TiledSprite",
              "type": "object"
            },
            {
              "codeOnly": false,
              "defaultValue": "",
              "description": "Behavior",
              "longDescription": "",
              "name": "Behavior",
              "optional": false,
              "supplementaryInformation": "Recolorizer::TiledSpriteRecolorizer",
              "type": "behavior"
            }
          ],
          "objectGroups": []
        },
        {
          "description": "",
          "fullName": "",
          "functionType": "Action",
          "group": "",
          "name": "onDestroy",
          "private": false,
          "sentence": "",
          "events": [
            {
              "disabled": false,
              "folded": false,
              "type": "BuiltinCommonInstructions::Comment",
              "color": {
                "b": 109,
                "g": 230,
                "r": 255,
                "textB": 0,
                "textG": 0,
                "textR": 0
              },
              "comment": "Unsure that destroyed instance recolorization can be free.",
              "comment2": ""
            },
            {
              "disabled": false,
              "folded": false,
              "type": "BuiltinCommonInstructions::Standard",
              "conditions": [],
              "actions": [
                {
                  "type": {
                    "inverted": false,
                    "value": "Recolorizer::TiledSpriteRecolorizer::ResetColor"
                  },
                  "parameters": [
                    "Object",
                    "Behavior",
                    ""
                  ],
                  "subInstructions": []
                }
              ],
              "events": []
            }
          ],
          "parameters": [
            {
              "codeOnly": false,
              "defaultValue": "",
              "description": "Object",
              "longDescription": "",
              "name": "Object",
              "optional": false,
              "supplementaryInformation": "TiledSpriteObject::TiledSprite",
              "type": "object"
            },
            {
              "codeOnly": false,
              "defaultValue": "",
              "description": "Behavior",
              "longDescription": "",
              "name": "Behavior",
              "optional": false,
              "supplementaryInformation": "Recolorizer::TiledSpriteRecolorizer",
              "type": "behavior"
            }
          ],
          "objectGroups": []
        }
      ],
      "propertyDescriptors": []
    },
    {
      "description": "Independently change the colors of a panel sprite.",
      "fullName": "Panel sprite recolorizer",
      "name": "PanelSpriteRecolorizer",
      "objectType": "PanelSpriteObject::PanelSprite",
      "eventsFunctions": [
        {
          "description": "",
          "fullName": "",
          "functionType": "Action",
          "group": "",
          "name": "onCreated",
          "private": false,
          "sentence": "",
          "events": [
            {
              "disabled": false,
              "folded": false,
              "type": "BuiltinCommonInstructions::Standard",
              "conditions": [],
              "actions": [
                {
                  "type": {
                    "inverted": false,
                    "value": "Recolorizer::DefineJavaScript"
                  },
                  "parameters": [
                    "",
                    ""
                  ],
                  "subInstructions": []
                }
              ],
              "events": []
            },
            {
              "disabled": false,
              "folded": false,
              "type": "BuiltinCommonInstructions::JsCode",
              "inlineCode": "/** @type {gdjs.PanelSpriteRuntimeObject} */\nconst panelSprite = objects[0];\nconst behaviorName = eventsFunctionContext.getBehaviorName(\"Behavior\");\nconst behavior = panelSprite.getBehavior(behaviorName);\n\nif (!runtimeScene.__recolorizerExtension) {\n    runtimeScene.__recolorizerExtension = { managers: new Map()};\n}\n/** @type {Map} */\nconst managers = runtimeScene.__recolorizerExtension.managers || new Map();\nlet manager = managers.get(panelSprite.getName());\nif (!manager) {\n    const renderer = panelSprite._renderer;\n    /** @type {PIXI.Texture[]} */\n    const sourceTextures = renderer._borderSprites.map(sprite => sprite.texture);\n    sourceTextures.push(renderer._centerSprite.texture);\n    manager = new gdjs.__recolorizerExtension.RecolorizationManager(sourceTextures);\n    managers.set(panelSprite.getName(), manager);\n}\n\nconst renderer = panelSprite._renderer;\n\nbehavior.recolorizer = new gdjs.__recolorizerExtension.Recolorizer(\n    manager,\n    [...renderer._borderSprites, renderer._centerSprite],\n);\n",
              "parameterObjects": "Object",
              "useStrict": true,
              "eventsSheetExpanded": true
            }
          ],
          "parameters": [
            {
              "codeOnly": false,
              "defaultValue": "",
              "description": "Object",
              "longDescription": "",
              "name": "Object",
              "optional": false,
              "supplementaryInformation": "PanelSpriteObject::PanelSprite",
              "type": "object"
            },
            {
              "codeOnly": false,
              "defaultValue": "",
              "description": "Behavior",
              "longDescription": "",
              "name": "Behavior",
              "optional": false,
              "supplementaryInformation": "Recolorizer::PanelSpriteRecolorizer",
              "type": "behavior"
            }
          ],
          "objectGroups": []
        },
        {
          "description": "Replace a given color of an object with another one. The scope allows to change similar colors at once.",
          "fullName": "Recolorize",
          "functionType": "Action",
          "group": "",
          "name": "Recolorize",
          "private": false,
          "sentence": "Recolorize _PARAM0_ from color _PARAM2_ to color _PARAM3_ within a scope of  hue: _PARAM4_° saturation: _PARAM5_% lightness: _PARAM6_%",
          "events": [
            {
              "disabled": false,
              "folded": false,
              "type": "BuiltinCommonInstructions::JsCode",
              "inlineCode": "const behaviorName = eventsFunctionContext.getBehaviorName(\"Behavior\");\nconst behavior = objects[0].getBehavior(behaviorName);\n\nconst originColor = gdjs.rgbOrHexToRGBColor(eventsFunctionContext.getArgument(\"OriginColor\"));\nconst targetColor = gdjs.rgbOrHexToRGBColor(eventsFunctionContext.getArgument(\"TargetColor\"));\nconst hueScope = gdjs.evtTools.common.clamp(eventsFunctionContext.getArgument(\"HueScope\") / 360, 0, 180);\nconst saturationScope = gdjs.evtTools.common.clamp(eventsFunctionContext.getArgument(\"SaturationScope\") / 100, 0, 50);\nconst lightnessScope = gdjs.evtTools.common.clamp(eventsFunctionContext.getArgument(\"LightnessScope\") / 100, 0, 50);\n\nbehavior.recolorizer.recolorizeSprite(originColor, targetColor, hueScope, saturationScope, lightnessScope);",
              "parameterObjects": "Object",
              "useStrict": true,
              "eventsSheetExpanded": true
            }
          ],
          "parameters": [
            {
              "codeOnly": false,
              "defaultValue": "",
              "description": "Object",
              "longDescription": "",
              "name": "Object",
              "optional": false,
              "supplementaryInformation": "PanelSpriteObject::PanelSprite",
              "type": "object"
            },
            {
              "codeOnly": false,
              "defaultValue": "",
              "description": "Behavior",
              "longDescription": "",
              "name": "Behavior",
              "optional": false,
              "supplementaryInformation": "Recolorizer::PanelSpriteRecolorizer",
              "type": "behavior"
            },
            {
              "codeOnly": false,
              "defaultValue": "",
              "description": "Origin color",
              "longDescription": "",
              "name": "OriginColor",
              "optional": false,
              "supplementaryInformation": "",
              "type": "color"
            },
            {
              "codeOnly": false,
              "defaultValue": "",
              "description": "Target color",
              "longDescription": "",
              "name": "TargetColor",
              "optional": false,
              "supplementaryInformation": "",
              "type": "color"
            },
            {
              "codeOnly": false,
              "defaultValue": "",
              "description": "Hue scope (from 0° to 180°)",
              "longDescription": "",
              "name": "HueScope",
              "optional": false,
              "supplementaryInformation": "",
              "type": "expression"
            },
            {
              "codeOnly": false,
              "defaultValue": "",
              "description": "Saturation scope (in percent)",
              "longDescription": "",
              "name": "SaturationScope",
              "optional": false,
              "supplementaryInformation": "",
              "type": "expression"
            },
            {
              "codeOnly": false,
              "defaultValue": "",
              "description": "Lightness scope (in percent)",
              "longDescription": "",
              "name": "LightnessScope",
              "optional": false,
              "supplementaryInformation": "",
              "type": "expression"
            }
          ],
          "objectGroups": []
        },
        {
          "description": "Set back the original colors of an object.",
          "fullName": "Reset color",
          "functionType": "Action",
          "group": "",
          "name": "ResetColor",
          "private": false,
          "sentence": "Reset the colors of _PARAM0_",
          "events": [
            {
              "disabled": false,
              "folded": false,
              "type": "BuiltinCommonInstructions::JsCode",
              "inlineCode": "const behaviorName = eventsFunctionContext.getBehaviorName(\"Behavior\");\nconst behavior = objects[0].getBehavior(behaviorName);\n\nbehavior.recolorizer.resetSprite();",
              "parameterObjects": "Object",
              "useStrict": true,
              "eventsSheetExpanded": true
            }
          ],
          "parameters": [
            {
              "codeOnly": false,
              "defaultValue": "",
              "description": "Object",
              "longDescription": "",
              "name": "Object",
              "optional": false,
              "supplementaryInformation": "PanelSpriteObject::PanelSprite",
              "type": "object"
            },
            {
              "codeOnly": false,
              "defaultValue": "",
              "description": "Behavior",
              "longDescription": "",
              "name": "Behavior",
              "optional": false,
              "supplementaryInformation": "Recolorizer::PanelSpriteRecolorizer",
              "type": "behavior"
            }
          ],
          "objectGroups": []
        },
        {
          "description": "",
          "fullName": "",
          "functionType": "Action",
          "group": "",
          "name": "doStepPostEvents",
          "private": false,
          "sentence": "",
          "events": [
            {
              "disabled": false,
              "folded": false,
              "type": "BuiltinCommonInstructions::JsCode",
              "inlineCode": "/** @type {gdjs.PanelSpriteRuntimeObject} */\r\nconst panelSprite = objects[0];\r\nconst behaviorName = eventsFunctionContext.getBehaviorName(\"Behavior\");\r\nconst behavior = panelSprite.getBehavior(behaviorName);\r\n\r\nconst recolorized = behavior.recolorizer.updateSprite();\r\nif (recolorized) {\r\n      const renderer = panelSprite._renderer;\r\n      //renderer._wasRendered = false;\r\n      renderer._spritesContainer.cacheAsBitmap = false;\r\n}",
              "parameterObjects": "Object",
              "useStrict": true,
              "eventsSheetExpanded": true
            }
          ],
          "parameters": [
            {
              "codeOnly": false,
              "defaultValue": "",
              "description": "Object",
              "longDescription": "",
              "name": "Object",
              "optional": false,
              "supplementaryInformation": "PanelSpriteObject::PanelSprite",
              "type": "object"
            },
            {
              "codeOnly": false,
              "defaultValue": "",
              "description": "Behavior",
              "longDescription": "",
              "name": "Behavior",
              "optional": false,
              "supplementaryInformation": "Recolorizer::PanelSpriteRecolorizer",
              "type": "behavior"
            }
          ],
          "objectGroups": []
        },
        {
          "description": "",
          "fullName": "",
          "functionType": "Action",
          "group": "",
          "name": "onDestroy",
          "private": false,
          "sentence": "",
          "events": [
            {
              "disabled": false,
              "folded": false,
              "type": "BuiltinCommonInstructions::Comment",
              "color": {
                "b": 109,
                "g": 230,
                "r": 255,
                "textB": 0,
                "textG": 0,
                "textR": 0
              },
              "comment": "Unsure that destroyed instance recolorization can be free.",
              "comment2": ""
            },
            {
              "disabled": false,
              "folded": false,
              "type": "BuiltinCommonInstructions::Standard",
              "conditions": [],
              "actions": [
                {
                  "type": {
                    "inverted": false,
                    "value": "Recolorizer::TiledSpriteRecolorizer::ResetColor"
                  },
                  "parameters": [
                    "Object",
                    "Behavior",
                    ""
                  ],
                  "subInstructions": []
                }
              ],
              "events": []
            }
          ],
          "parameters": [
            {
              "codeOnly": false,
              "defaultValue": "",
              "description": "Object",
              "longDescription": "",
              "name": "Object",
              "optional": false,
              "supplementaryInformation": "PanelSpriteObject::PanelSprite",
              "type": "object"
            },
            {
              "codeOnly": false,
              "defaultValue": "",
              "description": "Behavior",
              "longDescription": "",
              "name": "Behavior",
              "optional": false,
              "supplementaryInformation": "Recolorizer::PanelSpriteRecolorizer",
              "type": "behavior"
            }
          ],
          "objectGroups": []
        }
      ],
      "propertyDescriptors": []
    }
  ]
}