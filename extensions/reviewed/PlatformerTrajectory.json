{
  "author": "",
  "category": "Movement",
  "description": "This extension allows to:\n* Configure the height of a jump by automatically choosing the right jump speed ([open the project online](https://editor.gdevelop.io/?project=example://platformer-jump-evaluator)).\n* Know when to jump to reach a platform (can be useful for AI).\n* Draw jump trajectories to check a level design.",
  "extensionNamespace": "",
  "fullName": "Platformer trajectory",
  "helpPath": "",
  "iconUrl": "data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0ibWRpLWNoYXJ0LWJlbGwtY3VydmUiIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJNOS45NiwxMS4zMUMxMC44Miw4LjEgMTEuNSw2IDEzLDZDMTQuNSw2IDE1LjE4LDguMSAxNi4wNCwxMS4zMUMxNywxNC45MiAxOC4xLDE5IDIyLDE5VjE3QzE5LjgsMTcgMTksMTQuNTQgMTcuOTcsMTAuOEMxNy4wOCw3LjQ2IDE2LjE1LDQgMTMsNEM5Ljg1LDQgOC45Miw3LjQ2IDguMDMsMTAuOEM3LjAzLDE0LjU0IDYuMiwxNyA0LDE3VjJIMlYyMkgyMlYyMEg0VjE5QzcuOSwxOSA5LDE0LjkyIDkuOTYsMTEuMzFaIiAvPjwvc3ZnPg==",
  "name": "PlatformerTrajectory",
  "previewIconUrl": "https://resources.gdevelop-app.com/assets/Icons/chart-bell-curve.svg",
  "shortDescription": "Platformer character jump easy configuration and platformer AI tools.",
  "version": "0.0.4",
  "tags": [
    "jump",
    "platform",
    "artificial inteligence",
    "AI"
  ],
  "authorIds": [
    "IWykYNRvhCZBN3vEgKEbBPOR3Oc2"
  ],
  "dependencies": [],
  "eventsFunctions": [],
  "eventsBasedBehaviors": [
    {
      "description": "Configure the height of a jump and evaluate the jump trajectory.",
      "fullName": "Platformer trajectory evaluator",
      "name": "PlatformerEvaluator",
      "objectType": "",
      "eventsFunctions": [
        {
          "description": "",
          "fullName": "",
          "functionType": "Action",
          "group": "",
          "name": "onCreated",
          "private": false,
          "sentence": "",
          "events": [
            {
              "disabled": false,
              "folded": false,
              "type": "BuiltinCommonInstructions::Standard",
              "conditions": [
                {
                  "type": {
                    "inverted": false,
                    "value": "PlatformerTrajectory::PlatformerEvaluator::PropertyJumpHeight"
                  },
                  "parameters": [
                    "Object",
                    "Behavior",
                    ">",
                    "0"
                  ],
                  "subInstructions": []
                }
              ],
              "actions": [
                {
                  "type": {
                    "inverted": false,
                    "value": "PlatformerTrajectory::PlatformerEvaluator::SetJumpHeight"
                  },
                  "parameters": [
                    "Object",
                    "Behavior",
                    "Object.Behavior::PropertyJumpHeight()",
                    ""
                  ],
                  "subInstructions": []
                }
              ],
              "events": []
            }
          ],
          "parameters": [
            {
              "codeOnly": false,
              "defaultValue": "",
              "description": "Object",
              "longDescription": "",
              "name": "Object",
              "optional": false,
              "supplementaryInformation": "",
              "type": "object"
            },
            {
              "codeOnly": false,
              "defaultValue": "",
              "description": "Behavior",
              "longDescription": "",
              "name": "Behavior",
              "optional": false,
              "supplementaryInformation": "PlatformerTrajectory::PlatformerEvaluator",
              "type": "behavior"
            }
          ],
          "objectGroups": []
        },
        {
          "description": "Change the jump speed to reach a given height.",
          "fullName": "Jump height",
          "functionType": "Action",
          "group": "",
          "name": "SetJumpHeight",
          "private": false,
          "sentence": "Change the jump height of _PARAM0_ to _PARAM2_",
          "events": [
            {
              "disabled": false,
              "folded": false,
              "type": "BuiltinCommonInstructions::Standard",
              "conditions": [],
              "actions": [
                {
                  "type": {
                    "inverted": false,
                    "value": "PlatformerTrajectory::PlatformerEvaluator::SetPropertyJumpHeight"
                  },
                  "parameters": [
                    "Object",
                    "Behavior",
                    "=",
                    "GetArgumentAsNumber(\"JumpHeight\")"
                  ],
                  "subInstructions": []
                }
              ],
              "events": []
            },
            {
              "disabled": false,
              "folded": false,
              "type": "BuiltinCommonInstructions::JsCode",
              "inlineCode": "// Formulas used in this extension were generated from a math model.\n// They are probably not understandable on their own.\n// If you need to modify them or need to write new feature,\n// please take a look to the platformer extension documentation:\n// https://github.com/4ian/GDevelop/tree/master/Extensions/PlatformBehavior#readme\n\nconst behaviorName = eventsFunctionContext.getBehaviorName(\"Behavior\");\nconst behavior = objects[0].getBehavior(behaviorName);\n/** @type {float} */\nconst jumpHeight = -Math.abs(eventsFunctionContext.getArgument(\"JumpHeight\"));\n\n/** @type {gdjs.PlatformerObjectRuntimeBehavior} */\nconst character = objects[0].getBehavior(behavior._getPlatformerCharacter());\n/** @type {float} */\nconst gravity = character.getGravity();\n/** @type {float} */\nconst maxFallingSpeed = character.getMaxFallingSpeed();\n/** @type {float} */\nconst jumpSustainTime = character.getJumpSustainTime();\n\nconst maxFallingSpeedReachedTime = maxFallingSpeed / gravity;\n\n// The implementation jumps from one quadratic resolution to another\n// to find the right formula to use as the time is unknown.\n\nconst sustainCase = (jumpHeight) => Math.sqrt(-jumpHeight * gravity * 2);\nconst maxFallingCase = (jumpHeight) => -gravity * jumpSustainTime + maxFallingSpeed\n    + Math.sqrt(gravity * gravity * jumpSustainTime * jumpSustainTime - 2 * jumpHeight * gravity - maxFallingSpeed * maxFallingSpeed);\n\nlet jumpSpeed = 0;\nlet peakTime = 0;\nif (maxFallingSpeedReachedTime > jumpSustainTime) {\n    // common case\n    jumpSpeed = -gravity * jumpSustainTime + Math.sqrt(2 * gravity * gravity * jumpSustainTime * jumpSustainTime - 4 * jumpHeight * gravity);\n    peakTime = (gravity * jumpSustainTime + jumpSpeed) / (2 * gravity);\n    if (peakTime < jumpSustainTime) {\n        jumpSpeed = sustainCase(jumpHeight);\n    }\n    else if (peakTime > maxFallingSpeedReachedTime) {\n        jumpSpeed = maxFallingCase(jumpHeight);\n    }\n}\nelse {\n    // affine case can't have a maximum\n\n    // sustain case\n    jumpSpeed = sustainCase(jumpHeight);\n    peakTime = jumpSpeed / gravity;\n    if (peakTime > maxFallingSpeedReachedTime) {\n        jumpSpeed = maxFallingCase(jumpHeight);\n    }\n}\n\nif (jumpSpeed >= 0) {\n    character.setJumpSpeed(jumpSpeed);\n}\n",
              "parameterObjects": "Object",
              "useStrict": true,
              "eventsSheetExpanded": true
            }
          ],
          "parameters": [
            {
              "codeOnly": false,
              "defaultValue": "",
              "description": "Object",
              "longDescription": "",
              "name": "Object",
              "optional": false,
              "supplementaryInformation": "",
              "type": "object"
            },
            {
              "codeOnly": false,
              "defaultValue": "",
              "description": "Behavior",
              "longDescription": "",
              "name": "Behavior",
              "optional": false,
              "supplementaryInformation": "PlatformerTrajectory::PlatformerEvaluator",
              "type": "behavior"
            },
            {
              "codeOnly": false,
              "defaultValue": "",
              "description": "Jump height",
              "longDescription": "",
              "name": "JumpHeight",
              "optional": false,
              "supplementaryInformation": "",
              "type": "expression"
            }
          ],
          "objectGroups": []
        },
        {
          "description": "Draw the jump trajectories from no sustain to full sustain.",
          "fullName": "Draw jump",
          "functionType": "Action",
          "group": "",
          "name": "DrawJump",
          "private": false,
          "sentence": "Draw the jump trajectory of _PARAM0_ on _PARAM2_",
          "events": [
            {
              "disabled": false,
              "folded": false,
              "type": "BuiltinCommonInstructions::Comment",
              "color": {
                "b": 109,
                "g": 230,
                "r": 255,
                "textB": 0,
                "textG": 0,
                "textR": 0
              },
              "comment": "The trajectory with full jump sustaining",
              "comment2": ""
            },
            {
              "disabled": false,
              "folded": false,
              "type": "BuiltinCommonInstructions::Standard",
              "conditions": [],
              "actions": [
                {
                  "type": {
                    "inverted": false,
                    "value": "PlatformerTrajectory::PlatformerEvaluator::SetPropertyTime"
                  },
                  "parameters": [
                    "Object",
                    "Behavior",
                    "=",
                    "0"
                  ],
                  "subInstructions": []
                },
                {
                  "type": {
                    "inverted": false,
                    "value": "PrimitiveDrawing::BeginFillPath"
                  },
                  "parameters": [
                    "ShapePainter",
                    "0",
                    "0"
                  ],
                  "subInstructions": []
                },
                {
                  "type": {
                    "inverted": false,
                    "value": "PlatformerTrajectory::PlatformerEvaluator::SetPropertyDuration"
                  },
                  "parameters": [
                    "Object",
                    "Behavior",
                    "=",
                    "Object.Behavior::JumpDownTime(0, Object.PlatformerCharacter::JumpSustainTime())"
                  ],
                  "subInstructions": []
                },
                {
                  "type": {
                    "inverted": false,
                    "value": "PlatformerTrajectory::PlatformerEvaluator::SetPropertyDuration"
                  },
                  "parameters": [
                    "Object",
                    "Behavior",
                    "=",
                    "3"
                  ],
                  "subInstructions": []
                }
              ],
              "events": []
            },
            {
              "disabled": false,
              "folded": false,
              "infiniteLoopWarning": true,
              "type": "BuiltinCommonInstructions::While",
              "whileConditions": [
                {
                  "type": {
                    "inverted": false,
                    "value": "PlatformerTrajectory::PlatformerEvaluator::PropertyTime"
                  },
                  "parameters": [
                    "Object",
                    "Behavior",
                    "<",
                    "Object.Behavior::PropertyDuration()"
                  ],
                  "subInstructions": []
                }
              ],
              "conditions": [],
              "actions": [
                {
                  "type": {
                    "inverted": false,
                    "value": "PrimitiveDrawing::PathLineTo"
                  },
                  "parameters": [
                    "ShapePainter",
                    "Object.PlatformerCharacter::MaxSpeed() * Object.Behavior::PropertyTime()",
                    "Object.Behavior::JumpY(Object.Behavior::PropertyTime(), Object.PlatformerCharacter::JumpSustainTime())"
                  ],
                  "subInstructions": []
                },
                {
                  "type": {
                    "inverted": false,
                    "value": "PlatformerTrajectory::PlatformerEvaluator::SetPropertyTime"
                  },
                  "parameters": [
                    "Object",
                    "Behavior",
                    "+",
                    "1/30"
                  ],
                  "subInstructions": []
                }
              ],
              "events": []
            },
            {
              "disabled": false,
              "folded": false,
              "type": "BuiltinCommonInstructions::Comment",
              "color": {
                "b": 109,
                "g": 230,
                "r": 255,
                "textB": 0,
                "textG": 0,
                "textR": 0
              },
              "comment": "The trajectory without jump sustaining (impossible to do in practice as sustain happens at least one frame)",
              "comment2": ""
            },
            {
              "disabled": false,
              "folded": false,
              "infiniteLoopWarning": true,
              "type": "BuiltinCommonInstructions::While",
              "whileConditions": [
                {
                  "type": {
                    "inverted": false,
                    "value": "PlatformerTrajectory::PlatformerEvaluator::PropertyTime"
                  },
                  "parameters": [
                    "Object",
                    "Behavior",
                    ">",
                    "0"
                  ],
                  "subInstructions": []
                }
              ],
              "conditions": [],
              "actions": [
                {
                  "type": {
                    "inverted": false,
                    "value": "PlatformerTrajectory::PlatformerEvaluator::SetPropertyTime"
                  },
                  "parameters": [
                    "Object",
                    "Behavior",
                    "-",
                    "1/30"
                  ],
                  "subInstructions": []
                },
                {
                  "type": {
                    "inverted": false,
                    "value": "PrimitiveDrawing::PathLineTo"
                  },
                  "parameters": [
                    "ShapePainter",
                    "Object.PlatformerCharacter::MaxSpeed() * Object.Behavior::PropertyTime()",
                    "Object.Behavior::JumpY(Object.Behavior::PropertyTime(), 0)"
                  ],
                  "subInstructions": []
                }
              ],
              "events": []
            },
            {
              "disabled": false,
              "folded": false,
              "type": "BuiltinCommonInstructions::Standard",
              "conditions": [],
              "actions": [
                {
                  "type": {
                    "inverted": false,
                    "value": "PrimitiveDrawing::closePath"
                  },
                  "parameters": [
                    "ShapePainter"
                  ],
                  "subInstructions": []
                }
              ],
              "events": []
            }
          ],
          "parameters": [
            {
              "codeOnly": false,
              "defaultValue": "",
              "description": "Object",
              "longDescription": "",
              "name": "Object",
              "optional": false,
              "supplementaryInformation": "",
              "type": "object"
            },
            {
              "codeOnly": false,
              "defaultValue": "",
              "description": "Behavior",
              "longDescription": "",
              "name": "Behavior",
              "optional": false,
              "supplementaryInformation": "PlatformerTrajectory::PlatformerEvaluator",
              "type": "behavior"
            },
            {
              "codeOnly": false,
              "defaultValue": "",
              "description": "Shape painter",
              "longDescription": "",
              "name": "ShapePainter",
              "optional": false,
              "supplementaryInformation": "PrimitiveDrawing::Drawer",
              "type": "objectList"
            }
          ],
          "objectGroups": []
        },
        {
          "description": "The jump Y displacement at a given time from the start of the jump.",
          "fullName": "Jump Y",
          "functionType": "Expression",
          "group": "",
          "name": "JumpY",
          "private": false,
          "sentence": "",
          "events": [
            {
              "disabled": false,
              "folded": false,
              "type": "BuiltinCommonInstructions::JsCode",
              "inlineCode": "// Formulas used in this extension were generated from a math model.\n// They are probably not understandable on their own.\n// If you need to modify them or need to write new feature,\n// please take a look to the platformer extension documentation:\n// https://github.com/4ian/GDevelop/tree/master/Extensions/PlatformBehavior#readme\n\nconst behaviorName = eventsFunctionContext.getBehaviorName(\"Behavior\");\nconst behavior = objects[0].getBehavior(behaviorName);\n/** @type {float} */\nconst t = eventsFunctionContext.getArgument(\"Time\");\n/** @type {float} */\nconst jumpSustainTime = eventsFunctionContext.getArgument(\"JumpSustainTime\");\n\nconst character = objects[0].getBehavior(behavior._getPlatformerCharacter());\n/** @type {float} */\nconst gravity = character.getGravity();\n/** @type {float} */\nconst maxFallingSpeed = character.getMaxFallingSpeed();\n/** @type {float} */\nconst jumpSpeed = character.getJumpSpeed();\n\n// Falling and jump speed are integrated independently\n// and summed at the end to get the Y displacement.\n\nconst maxFallingSpeedReachedTime = maxFallingSpeed / gravity;\nlet fallingY = 0;\nif (t < maxFallingSpeedReachedTime) {\n    fallingY = gravity * t * t / 2;\n}\nelse {\n    fallingY = maxFallingSpeed * (t - maxFallingSpeed / (2 * gravity));\n}\n\nconst jumpEndTime = jumpSustainTime + jumpSpeed / gravity;\nlet jumpingY = 0;\nif (t < jumpSustainTime) {\n    jumpingY = -jumpSpeed * t;\n}\nelse if (t < jumpEndTime) {\n    jumpingY = gravity * jumpSustainTime * jumpSustainTime / 2 + gravity * t * t / 2\n        - (gravity * jumpSustainTime + jumpSpeed) * t;\n}\nelse {\n    jumpingY = (jumpEndTime * jumpEndTime + jumpSustainTime * jumpSustainTime) * gravity / 2\n        - (gravity * jumpSustainTime + jumpSpeed) * jumpEndTime;\n}\n\neventsFunctionContext.returnValue = fallingY + jumpingY;\n",
              "parameterObjects": "Object",
              "useStrict": true,
              "eventsSheetExpanded": true
            }
          ],
          "parameters": [
            {
              "codeOnly": false,
              "defaultValue": "",
              "description": "Object",
              "longDescription": "",
              "name": "Object",
              "optional": false,
              "supplementaryInformation": "",
              "type": "object"
            },
            {
              "codeOnly": false,
              "defaultValue": "",
              "description": "Behavior",
              "longDescription": "",
              "name": "Behavior",
              "optional": false,
              "supplementaryInformation": "PlatformerTrajectory::PlatformerEvaluator",
              "type": "behavior"
            },
            {
              "codeOnly": false,
              "defaultValue": "",
              "description": "Time",
              "longDescription": "",
              "name": "Time",
              "optional": false,
              "supplementaryInformation": "",
              "type": "expression"
            },
            {
              "codeOnly": false,
              "defaultValue": "",
              "description": "Jump sustaining duration",
              "longDescription": "",
              "name": "JumpSustainTime",
              "optional": false,
              "supplementaryInformation": "",
              "type": "expression"
            }
          ],
          "objectGroups": []
        },
        {
          "description": "The maximum Y displacement.",
          "fullName": "Peak Y",
          "functionType": "Expression",
          "group": "",
          "name": "JumpPeakY",
          "private": false,
          "sentence": "",
          "events": [
            {
              "disabled": false,
              "folded": false,
              "type": "BuiltinCommonInstructions::Standard",
              "conditions": [],
              "actions": [
                {
                  "type": {
                    "inverted": false,
                    "value": "SetReturnNumber"
                  },
                  "parameters": [
                    "Object.Behavior::JumpY(Object.Behavior::JumpPeakTime(GetArgumentAsNumber(\"JumpSustainTime\")), GetArgumentAsNumber(\"JumpSustainTime\"))"
                  ],
                  "subInstructions": []
                }
              ],
              "events": []
            }
          ],
          "parameters": [
            {
              "codeOnly": false,
              "defaultValue": "",
              "description": "Object",
              "longDescription": "",
              "name": "Object",
              "optional": false,
              "supplementaryInformation": "",
              "type": "object"
            },
            {
              "codeOnly": false,
              "defaultValue": "",
              "description": "Behavior",
              "longDescription": "",
              "name": "Behavior",
              "optional": false,
              "supplementaryInformation": "PlatformerTrajectory::PlatformerEvaluator",
              "type": "behavior"
            },
            {
              "codeOnly": false,
              "defaultValue": "",
              "description": "Jump sustaining duration",
              "longDescription": "",
              "name": "JumpSustainTime",
              "optional": false,
              "supplementaryInformation": "",
              "type": "expression"
            }
          ],
          "objectGroups": []
        },
        {
          "description": "The time from the start of the jump when it reaches the maximum Y displacement.",
          "fullName": "Peak time",
          "functionType": "Expression",
          "group": "",
          "name": "JumpPeakTime",
          "private": false,
          "sentence": "",
          "events": [
            {
              "disabled": false,
              "folded": false,
              "type": "BuiltinCommonInstructions::JsCode",
              "inlineCode": "// Formulas used in this extension were generated from a math model.\n// They are probably not understandable on their own.\n// If you need to modify them or need to write new feature,\n// please take a look to the platformer extension documentation:\n// https://github.com/4ian/GDevelop/tree/master/Extensions/PlatformBehavior#readme\n\nconst behaviorName = eventsFunctionContext.getBehaviorName(\"Behavior\");\nconst behavior = objects[0].getBehavior(behaviorName);\n/** @type {float} */\nconst y = eventsFunctionContext.getArgument(\"PositionY\");\n/** @type {float} */\nconst jumpSustainTime = eventsFunctionContext.getArgument(\"JumpSustainTime\");\n\n/** @type {gdjs.PlatformerObjectRuntimeBehavior} */\nconst character = objects[0].getBehavior(behavior._getPlatformerCharacter());\n/** @type {float} */\nconst gravity = character.getGravity();\n/** @type {float} */\nconst maxFallingSpeed = character.getMaxFallingSpeed();\n/** @type {float} */\nconst jumpSpeed = character.getJumpSpeed();\n\nconst maxFallingSpeedReachedTime = maxFallingSpeed / gravity;\n\n// The implementation jumps from one quadratic resolution to another\n// to find the right formula to use as the time is unknown.\nlet peakTime = 0;\n\nif (maxFallingSpeedReachedTime > jumpSustainTime) {\n    // common case\n    peakTime = (gravity * jumpSustainTime + jumpSpeed) / (2 * gravity);\n    if (peakTime < jumpSustainTime) {\n        // sustain case\n        peakTime = jumpSpeed / gravity;\n    }\n    else if (peakTime > maxFallingSpeedReachedTime) {\n        // max falling case\n        peakTime = jumpSustainTime + (jumpSpeed - maxFallingSpeed) / gravity;\n    }\n}\nelse {\n    // affine case can't have a maximum\n\n    // sustain case\n    peakTime = jumpSpeed / gravity;\n    if (peakTime > maxFallingSpeedReachedTime) {\n        // max falling case\n        peakTime = jumpSustainTime + (jumpSpeed - maxFallingSpeed) / gravity;\n    }\n}\n\n//console.log(\"peakTime: \" + peakTime);\neventsFunctionContext.returnValue = peakTime;\n",
              "parameterObjects": "Object",
              "useStrict": true,
              "eventsSheetExpanded": true
            }
          ],
          "parameters": [
            {
              "codeOnly": false,
              "defaultValue": "",
              "description": "Object",
              "longDescription": "",
              "name": "Object",
              "optional": false,
              "supplementaryInformation": "",
              "type": "object"
            },
            {
              "codeOnly": false,
              "defaultValue": "",
              "description": "Behavior",
              "longDescription": "",
              "name": "Behavior",
              "optional": false,
              "supplementaryInformation": "PlatformerTrajectory::PlatformerEvaluator",
              "type": "behavior"
            },
            {
              "codeOnly": false,
              "defaultValue": "",
              "description": "Jump sustaining duration",
              "longDescription": "",
              "name": "JumpSustainTime",
              "optional": false,
              "supplementaryInformation": "",
              "type": "expression"
            }
          ],
          "objectGroups": []
        },
        {
          "description": "The time from the start of the jump when it reaches a given Y displacement moving upward.",
          "fullName": "Jump up time",
          "functionType": "Expression",
          "group": "",
          "name": "JumpUpTime",
          "private": false,
          "sentence": "",
          "events": [
            {
              "disabled": false,
              "folded": false,
              "type": "BuiltinCommonInstructions::Standard",
              "conditions": [],
              "actions": [
                {
                  "type": {
                    "inverted": false,
                    "value": "SetReturnNumber"
                  },
                  "parameters": [
                    "Object.Behavior::JumpPeakTime(GetArgumentAsNumber(\"JumpSustainTime\"))"
                  ],
                  "subInstructions": []
                }
              ],
              "events": []
            },
            {
              "disabled": false,
              "folded": false,
              "type": "BuiltinCommonInstructions::Standard",
              "conditions": [
                {
                  "type": {
                    "inverted": false,
                    "value": "Egal"
                  },
                  "parameters": [
                    "GetArgumentAsNumber(\"PositionY\")",
                    ">=",
                    "Object.Behavior::JumpPeakY(GetArgumentAsNumber(\"JumpSustainTime\"))"
                  ],
                  "subInstructions": []
                }
              ],
              "actions": [],
              "events": [
                {
                  "disabled": false,
                  "folded": false,
                  "type": "BuiltinCommonInstructions::JsCode",
                  "inlineCode": "// Formulas used in this extension were generated from a math model.\n// They are probably not understandable on their own.\n// If you need to modify them or need to write new feature,\n// please take a look to the platformer extension documentation:\n// https://github.com/4ian/GDevelop/tree/master/Extensions/PlatformBehavior#readme\n\nconst behaviorName = eventsFunctionContext.getBehaviorName(\"Behavior\");\nconst behavior = objects[0].getBehavior(behaviorName);\n/** @type {float} */\nconst y = eventsFunctionContext.getArgument(\"PositionY\");\n/** @type {float} */\nconst jumpSustainTime = eventsFunctionContext.getArgument(\"JumpSustainTime\");\n\n/** @type {gdjs.PlatformerObjectRuntimeBehavior} */\nconst character = objects[0].getBehavior(behavior._getPlatformerCharacter());\n/** @type {float} */\nconst gravity = character.getGravity();\n/** @type {float} */\nconst maxFallingSpeed = character.getMaxFallingSpeed();\n/** @type {float} */\nconst jumpSpeed = character.getJumpSpeed();\n\nconst maxFallingSpeedReachedTime = maxFallingSpeed / gravity;\nconst jumpEndTime = jumpSustainTime + jumpSpeed / gravity;\n\n// The implementation jumps from one quadratic resolution to another\n// to find the right formula to use as the time is unknown.\nconst sustainCase = (y) => (jumpSpeed - Math.sqrt(jumpSpeed * jumpSpeed + 2 * gravity * y)) / gravity;\nconst affineCase = (y) => -(maxFallingSpeed * maxFallingSpeed + 2 * gravity * y) / (gravity * jumpSpeed - gravity * maxFallingSpeed) / 2;\nconst commonCase = (y) => (gravity * jumpSustainTime + jumpSpeed - Math.sqrt(-gravity * gravity * jumpSustainTime * jumpSustainTime\n    + 2 * gravity * jumpSpeed * jumpSustainTime + jumpSpeed * jumpSpeed + 4 * gravity * y)) / (2 * gravity);\nconst maxFallingCase = (y) => (gravity * jumpSustainTime + jumpSpeed - maxFallingSpeed - Math.sqrt(2 * gravity * jumpSpeed * jumpSustainTime\n    + jumpSpeed * jumpSpeed - 2 * (gravity * jumpSustainTime + jumpSpeed) * maxFallingSpeed + 2 * maxFallingSpeed * maxFallingSpeed + 2 * gravity * y)) / gravity;\nconst freeFallCase = (y) => -Math.sqrt(2 * gravity * jumpSpeed * jumpSustainTime + jumpSpeed * jumpSpeed + 2 * gravity * y) / gravity;\n//const gladdingCase = (y) => (2 * gravity * jumpSpeed * jumpSustainTime + jumpSpeed * jumpSpeed + maxFallingSpeed * maxFallingSpeed + 2 * gravity * y) / (2 * gravity * maxFallingSpeed);\n\nlet time = 0;\nif (maxFallingSpeedReachedTime > jumpEndTime) {\n    time = sustainCase(y);\n    if (time > jumpSustainTime || Number.isNaN(time)) {\n        time = commonCase(y);\n        if (time > jumpEndTime || Number.isNaN(time)) {\n            time = freeFallCase(y);\n        }\n    }\n}\nelse if (maxFallingSpeedReachedTime > jumpSustainTime) {\n    time = sustainCase(y);\n    if (time > jumpSustainTime || Number.isNaN(time)) {\n        time = commonCase(y);\n        if (time > maxFallingSpeedReachedTime || Number.isNaN(time)) {\n            time = maxFallingCase(y);\n        }\n    }\n}\nelse {\n    time = sustainCase(y);\n    if (time > maxFallingSpeedReachedTime || Number.isNaN(time)) {\n        time = maxFallingSpeed <= jumpSpeed ? affineCase(y) : time = Number.MAX_VALUE\n        if (time > jumpSustainTime || Number.isNaN(time)) {\n            time = maxFallingCase(y);\n        }\n    }\n}\n\neventsFunctionContext.returnValue = time;\n",
                  "parameterObjects": "Object",
                  "useStrict": true,
                  "eventsSheetExpanded": true
                }
              ]
            }
          ],
          "parameters": [
            {
              "codeOnly": false,
              "defaultValue": "",
              "description": "Object",
              "longDescription": "",
              "name": "Object",
              "optional": false,
              "supplementaryInformation": "",
              "type": "object"
            },
            {
              "codeOnly": false,
              "defaultValue": "",
              "description": "Behavior",
              "longDescription": "",
              "name": "Behavior",
              "optional": false,
              "supplementaryInformation": "PlatformerTrajectory::PlatformerEvaluator",
              "type": "behavior"
            },
            {
              "codeOnly": false,
              "defaultValue": "",
              "description": "Y position",
              "longDescription": "",
              "name": "PositionY",
              "optional": false,
              "supplementaryInformation": "",
              "type": "expression"
            },
            {
              "codeOnly": false,
              "defaultValue": "",
              "description": "Jump sustaining duration",
              "longDescription": "",
              "name": "JumpSustainTime",
              "optional": false,
              "supplementaryInformation": "",
              "type": "expression"
            }
          ],
          "objectGroups": []
        },
        {
          "description": "The time from the start of the jump when it reaches a given Y displacement moving downward.",
          "fullName": "Jump down time",
          "functionType": "Expression",
          "group": "",
          "name": "JumpDownTime",
          "private": false,
          "sentence": "",
          "events": [
            {
              "disabled": false,
              "folded": false,
              "type": "BuiltinCommonInstructions::Standard",
              "conditions": [],
              "actions": [
                {
                  "type": {
                    "inverted": false,
                    "value": "SetReturnNumber"
                  },
                  "parameters": [
                    "Object.Behavior::JumpPeakTime(GetArgumentAsNumber(\"JumpSustainTime\"))"
                  ],
                  "subInstructions": []
                }
              ],
              "events": []
            },
            {
              "disabled": false,
              "folded": false,
              "type": "BuiltinCommonInstructions::Standard",
              "conditions": [
                {
                  "type": {
                    "inverted": false,
                    "value": "Egal"
                  },
                  "parameters": [
                    "GetArgumentAsNumber(\"PositionY\")",
                    ">=",
                    "Object.Behavior::JumpPeakY(GetArgumentAsNumber(\"JumpSustainTime\"))"
                  ],
                  "subInstructions": []
                }
              ],
              "actions": [],
              "events": [
                {
                  "disabled": false,
                  "folded": false,
                  "type": "BuiltinCommonInstructions::JsCode",
                  "inlineCode": "// Formulas used in this extension were generated from a math model.\n// They are probably not understandable on their own.\n// If you need to modify them or need to write new feature,\n// please take a look to the platformer extension documentation:\n// https://github.com/4ian/GDevelop/tree/master/Extensions/PlatformBehavior#readme\n\nconst behaviorName = eventsFunctionContext.getBehaviorName(\"Behavior\");\nconst behavior = objects[0].getBehavior(behaviorName);\n/** @type {float} */\nconst y = eventsFunctionContext.getArgument(\"PositionY\");\n/** @type {float} */\nconst jumpSustainTime = eventsFunctionContext.getArgument(\"JumpSustainTime\");\n\n/** @type {gdjs.PlatformerObjectRuntimeBehavior} */\nconst character = objects[0].getBehavior(behavior._getPlatformerCharacter());\n/** @type {float} */\nconst gravity = character.getGravity();\n/** @type {float} */\nconst maxFallingSpeed = character.getMaxFallingSpeed();\n/** @type {float} */\nconst jumpSpeed = character.getJumpSpeed();\n\nconst maxFallingSpeedReachedTime = maxFallingSpeed / gravity;\nconst jumpEndTime = jumpSustainTime + jumpSpeed / gravity;\n\n//console.log(\"y: \" + y);\n\n// The implementation jumps from one quadratic resolution to another\n// to find the right formula to use as the time is unknown.\nconst sustainCase = (y) => (jumpSpeed + Math.sqrt(jumpSpeed * jumpSpeed + 2 * gravity * y)) / gravity;\nconst affineCase = (y) => -(maxFallingSpeed * maxFallingSpeed + 2 * gravity * y) / (gravity * jumpSpeed - gravity * maxFallingSpeed) / 2;\nconst commonCase = (y) => (gravity * jumpSustainTime + jumpSpeed + Math.sqrt(-gravity * gravity * jumpSustainTime * jumpSustainTime\n    + 2 * gravity * jumpSpeed * jumpSustainTime + jumpSpeed * jumpSpeed + 4 * gravity * y)) / (2 * gravity);\nconst maxFallingCase = (y) => (gravity * jumpSustainTime + jumpSpeed - maxFallingSpeed + Math.sqrt(2 * gravity * jumpSpeed * jumpSustainTime\n    + jumpSpeed * jumpSpeed - 2 * (gravity * jumpSustainTime + jumpSpeed) * maxFallingSpeed + 2 * maxFallingSpeed * maxFallingSpeed + 2 * gravity * y)) / gravity;\nconst freeFallCase = (y) => Math.sqrt(2 * gravity * jumpSpeed * jumpSustainTime + jumpSpeed * jumpSpeed + 2 * gravity * y) / gravity;\nconst gladdingCase = (y) => (2 * gravity * jumpSpeed * jumpSustainTime + jumpSpeed * jumpSpeed + maxFallingSpeed * maxFallingSpeed + 2 * gravity * y) / (2 * gravity * maxFallingSpeed);\n\nlet time = 0;\nif (maxFallingSpeedReachedTime > jumpEndTime) {\n    time = sustainCase(y);\n    if (time > jumpSustainTime || Number.isNaN(time)) {\n        time = commonCase(y);\n        if (time > jumpEndTime || Number.isNaN(time)) {\n            time = freeFallCase(y);\n            if (time > maxFallingSpeedReachedTime || Number.isNaN(time)) {\n                time = gladdingCase(y);\n            }\n        }\n    }\n}\nelse if (maxFallingSpeedReachedTime > jumpSustainTime) {\n    time = sustainCase(y);\n    if (time > jumpSustainTime || Number.isNaN(time)) {\n        time = commonCase(y);\n        if (time > maxFallingSpeedReachedTime || Number.isNaN(time)) {\n            time = maxFallingCase(y);\n            if (time > jumpEndTime || Number.isNaN(time)) {\n                time = gladdingCase(y);\n            }\n        }\n    }\n}\nelse {\n    time = sustainCase(y);\n    if (time > maxFallingSpeedReachedTime || Number.isNaN(time)) {\n        time = maxFallingSpeed >= jumpSpeed ? affineCase(y) : time = Number.MAX_VALUE;\n        if (time > jumpSustainTime || Number.isNaN(time)) {\n            time = maxFallingCase(y);\n            if (time > jumpEndTime || Number.isNaN(time)) {\n                time = gladdingCase(y);\n            }\n        }\n    }\n}\n\neventsFunctionContext.returnValue = time;\n",
                  "parameterObjects": "Object",
                  "useStrict": true,
                  "eventsSheetExpanded": true
                }
              ]
            }
          ],
          "parameters": [
            {
              "codeOnly": false,
              "defaultValue": "",
              "description": "Object",
              "longDescription": "",
              "name": "Object",
              "optional": false,
              "supplementaryInformation": "",
              "type": "object"
            },
            {
              "codeOnly": false,
              "defaultValue": "",
              "description": "Behavior",
              "longDescription": "",
              "name": "Behavior",
              "optional": false,
              "supplementaryInformation": "PlatformerTrajectory::PlatformerEvaluator",
              "type": "behavior"
            },
            {
              "codeOnly": false,
              "defaultValue": "",
              "description": "Y position",
              "longDescription": "",
              "name": "PositionY",
              "optional": false,
              "supplementaryInformation": "",
              "type": "expression"
            },
            {
              "codeOnly": false,
              "defaultValue": "",
              "description": "Jump sustaining duration",
              "longDescription": "",
              "name": "JumpSustainTime",
              "optional": false,
              "supplementaryInformation": "",
              "type": "expression"
            }
          ],
          "objectGroups": []
        },
        {
          "description": "The X displacement before the character stops (always positive).",
          "fullName": "Stop distance",
          "functionType": "Expression",
          "group": "",
          "name": "StopXDistance",
          "private": false,
          "sentence": "",
          "events": [
            {
              "disabled": false,
              "folded": false,
              "type": "BuiltinCommonInstructions::JsCode",
              "inlineCode": "// Formulas used in this extension were generated from a math model.\n// They are probably not understandable on their own.\n// If you need to modify them or need to write new feature,\n// please take a look to the platformer extension documentation:\n// https://github.com/4ian/GDevelop/tree/master/Extensions/PlatformBehavior#readme\n\nconst behaviorName = eventsFunctionContext.getBehaviorName(\"Behavior\");\nconst behavior = objects[0].getBehavior(behaviorName);\n/** @type {float} */\nconst t = eventsFunctionContext.getArgument(\"Time\");\n\n/** @type {gdjs.PlatformerObjectRuntimeBehavior} */\nconst character = objects[0].getBehavior(behavior._getPlatformerCharacter());\n/** @type {float} */\nconst decelerationX = character.getDeceleration();\n/** @type {float} */\nconst currentSpeedX = Math.abs(character.getCurrentSpeed());\n\nlet x = 0;\nif (currentSpeedX === 0) {\n    x = 0;\n}\nelse {\n    const stopXTime = currentSpeedX / decelerationX;\n    t = stopXTime;\n    x = currentSpeedX * t - decelerationX * t * t / 2;\n}\neventsFunctionContext.returnValue = x;\n",
              "parameterObjects": "Object",
              "useStrict": true,
              "eventsSheetExpanded": true
            }
          ],
          "parameters": [
            {
              "codeOnly": false,
              "defaultValue": "",
              "description": "Object",
              "longDescription": "",
              "name": "Object",
              "optional": false,
              "supplementaryInformation": "",
              "type": "object"
            },
            {
              "codeOnly": false,
              "defaultValue": "",
              "description": "Behavior",
              "longDescription": "",
              "name": "Behavior",
              "optional": false,
              "supplementaryInformation": "PlatformerTrajectory::PlatformerEvaluator",
              "type": "behavior"
            },
            {
              "codeOnly": false,
              "defaultValue": "",
              "description": "Time",
              "longDescription": "",
              "name": "Time",
              "optional": false,
              "supplementaryInformation": "",
              "type": "expression"
            }
          ],
          "objectGroups": []
        },
        {
          "description": "The X displacement at a given time from now if decelerating (always positive).",
          "fullName": "Stopping X",
          "functionType": "Expression",
          "group": "",
          "name": "StoppingX",
          "private": false,
          "sentence": "",
          "events": [
            {
              "disabled": false,
              "folded": false,
              "type": "BuiltinCommonInstructions::JsCode",
              "inlineCode": "// Formulas used in this extension were generated from a math model.\n// They are probably not understandable on their own.\n// If you need to modify them or need to write new feature,\n// please take a look to the platformer extension documentation:\n// https://github.com/4ian/GDevelop/tree/master/Extensions/PlatformBehavior#readme\n\nconst behaviorName = eventsFunctionContext.getBehaviorName(\"Behavior\");\nconst behavior = objects[0].getBehavior(behaviorName);\n/** @type {float} */\nconst t = eventsFunctionContext.getArgument(\"Time\");\n\n/** @type {gdjs.PlatformerObjectRuntimeBehavior} */\nconst character = objects[0].getBehavior(behavior._getPlatformerCharacter());\n/** @type {float} */\nconst decelerationX = character.getDeceleration();\n/** @type {float} */\nconst currentSpeedX = Math.abs(character.getCurrentSpeed());\n\nlet x = 0;\nif (currentSpeedX === 0) {\n    x = 0;\n}\nelse {\n    const stopXTime = currentSpeedX / decelerationX;\n    t = Math.min(t, stopXTime);\n    x = currentSpeedX * t - decelerationX * t * t / 2;\n}\neventsFunctionContext.returnValue = x;\n",
              "parameterObjects": "Object",
              "useStrict": true,
              "eventsSheetExpanded": true
            }
          ],
          "parameters": [
            {
              "codeOnly": false,
              "defaultValue": "",
              "description": "Object",
              "longDescription": "",
              "name": "Object",
              "optional": false,
              "supplementaryInformation": "",
              "type": "object"
            },
            {
              "codeOnly": false,
              "defaultValue": "",
              "description": "Behavior",
              "longDescription": "",
              "name": "Behavior",
              "optional": false,
              "supplementaryInformation": "PlatformerTrajectory::PlatformerEvaluator",
              "type": "behavior"
            },
            {
              "codeOnly": false,
              "defaultValue": "",
              "description": "Time",
              "longDescription": "",
              "name": "Time",
              "optional": false,
              "supplementaryInformation": "",
              "type": "expression"
            }
          ],
          "objectGroups": []
        },
        {
          "description": "The X displacement at a given time from now if accelerating (always positive).",
          "fullName": "Moving X",
          "functionType": "Expression",
          "group": "",
          "name": "MovingX",
          "private": false,
          "sentence": "",
          "events": [
            {
              "disabled": false,
              "folded": false,
              "type": "BuiltinCommonInstructions::JsCode",
              "inlineCode": "// Formulas used in this extension were generated from a math model.\n// They are probably not understandable on their own.\n// If you need to modify them or need to write new feature,\n// please take a look to the platformer extension documentation:\n// https://github.com/4ian/GDevelop/tree/master/Extensions/PlatformBehavior#readme\n\nconst behaviorName = eventsFunctionContext.getBehaviorName(\"Behavior\");\nconst behavior = objects[0].getBehavior(behaviorName);\n/** @type {float} */\nconst t = eventsFunctionContext.getArgument(\"Time\");\n\n/** @type {gdjs.PlatformerObjectRuntimeBehavior} */\nconst character = objects[0].getBehavior(behavior._getPlatformerCharacter());\n/** @type {float} */\nconst accelerationX = character.getAcceleration();\n/** @type {float} */\nconst maxSpeedX = character.getMaxSpeed();\n/** @type {float} */\nconst currentSpeedX = Math.abs(character.getCurrentSpeed());\n\nlet x = 0;\nif (currentSpeedX === maxSpeedX) {\n    x = maxSpeedX * t;\n}\nelse {\n    const maxSpeedXTime = Math.min(0, (maxSpeedX - currentSpeedX) / accelerationX);\n    if (t < maxSpeedXTime) {\n        x = currentSpeedX * t + accelerationX * t * t / 2\n    }\n    else {\n        x = currentSpeedX * maxSpeedXTime\n            + accelerationX * maxSpeedXTime * maxSpeedXTime / 2\n            + maxSpeedX * (t - maxSpeedXTime);\n    }\n}\neventsFunctionContext.returnValue = x;\n",
              "parameterObjects": "Object",
              "useStrict": true,
              "eventsSheetExpanded": true
            }
          ],
          "parameters": [
            {
              "codeOnly": false,
              "defaultValue": "",
              "description": "Object",
              "longDescription": "",
              "name": "Object",
              "optional": false,
              "supplementaryInformation": "",
              "type": "object"
            },
            {
              "codeOnly": false,
              "defaultValue": "",
              "description": "Behavior",
              "longDescription": "",
              "name": "Behavior",
              "optional": false,
              "supplementaryInformation": "PlatformerTrajectory::PlatformerEvaluator",
              "type": "behavior"
            },
            {
              "codeOnly": false,
              "defaultValue": "",
              "description": "Time",
              "longDescription": "",
              "name": "Time",
              "optional": false,
              "supplementaryInformation": "",
              "type": "expression"
            }
          ],
          "objectGroups": []
        }
      ],
      "propertyDescriptors": [
        {
          "value": "",
          "type": "Behavior",
          "label": "Platformer character",
          "description": "",
          "group": "",
          "extraInformation": [
            "PlatformBehavior::PlatformerObjectBehavior"
          ],
          "hidden": false,
          "name": "PlatformerCharacter"
        },
        {
          "value": "",
          "type": "Number",
          "label": "Jump height",
          "description": "",
          "group": "",
          "extraInformation": [],
          "hidden": false,
          "name": "JumpHeight"
        },
        {
          "value": "",
          "type": "Number",
          "label": "",
          "description": "",
          "group": "",
          "extraInformation": [],
          "hidden": true,
          "name": "Time"
        },
        {
          "value": "",
          "type": "Number",
          "label": "",
          "description": "",
          "group": "",
          "extraInformation": [],
          "hidden": true,
          "name": "Duration"
        }
      ]
    }
  ]
}